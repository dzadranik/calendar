"use strict";var _Employee=Employee(),loadEmployee=_Employee.loadEmployee,loadEventInformation=_Employee.loadEventInformation,_Calendar=Calendar(),getYear=_Calendar.getYear,eventContainer=document.querySelector(".js-vacation-table");function Employee(){var t=[],n=function(t){return t.map((function(t){return'<tr employee-id="'.concat(t.id,'"> ').concat(e(t)+getYear(t.id)," </tr>")})).join("")},e=function(t){var n=t.name,e=t.img;return'<td>\n\t\t\t\t\t<img class="vacation__employee-photo" src="'.concat(e,'" alt="Employee image" />\n\t\t\t\t\t<div class="vacation__employee-name">').concat(n,"</div>\n\t\t\t\t</td>\n\t\t\t\t<td>").concat(t.vacationDaysCount,"/28</td>")},a=function(t,n){document.querySelector(n).innerHTML+=t},o=function(t){var n=t.id;t.events.forEach((function(t){return c(t,n)}))},c=function(t,n){var e=t.id,a=t.dateStart,o=t.dateEnd,c=t.name,r=a.split(".").map(parseFloat),i=o.split(".").map(parseFloat),d=r[0],v=r[1],l=i[0],u=i[1],s=function(t,e){return document.querySelector('[data-day="'.concat(t,"-").concat(e-1,"-").concat(n,'"]'))},m=function(t,a){t.classList.add("calendar__day--".concat(c)),t.setAttribute("data-event-id","".concat(n,"-").concat(e,"-").concat(a))};if(v===u)for(var f=d;f<=l;f++)m(s(f,v),v-1);else{for(var _=d;_<=31;_++){var p=s(_,v);p&&m(p,v-1)}for(var y=1;y<=l;y++)m(s(y,u),u-1)}};return{loadEmployee:function(){fetch("https://dzadranik.github.io/i-dex/src/js/vacation-calendar.json").then((function(t){return t.json()})).then((function(e){return function(e){t=e,a(n(e),".js-vacation-table"),e.forEach((function(t){return o(t)}))}(e)}))},loadEventInformation:function(n){var e=n.split("-").map(parseFloat),o=t.find((function(t){return t.id===e[0]})),c=o.events.find((function(t){return t.id===e[1]}));a(function(t,n){var e=t.name,a=t.img,o=n.name,c=n.dateStart,r=n.dateEnd;return'<div class="calendar-event">\n\t\t\t\t\t<div class="calendar-event__employee">\n\t\t\t\t\t\t<img class="calendar-event__employee-photo" src="'.concat(a,'" alt="Employee image">\n\t\t\t\t\t\t<div class="calendar-event__employee-name">').concat(e,'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="calendar-event__information">\n\t\t\t\t\t\t<div class="calendar-event__date calendar-event__date--').concat(o,'">\n\t\t\t\t\t\t\t').concat(c,".2020 — ").concat(r,'.2020 (14д.)\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="calendar-event__name">отпуск</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>')}(o,c),".js-month-".concat(o.id,"-").concat(e[2]))}}}function Calendar(){var t,n,e,a,o,c=function(n){o=1,r(n);var e="";return function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o<=t&&(e+=i(a),n(a+1))}(),'<td>\n\t\t\t\t\t<div class="calendar__month js-month-'.concat(a,"-").concat(n,'">\n\t\t\t\t\t\t').concat(e,"\n\t\t\t\t\t</div>\n\t\t\t\t</td>")},r=function(a){e=a,t=new Date(2020,a+1,0).getDate();var o=new Date(2020,a,1).getDay();n=0===o?6:o-1},i=function(e){var a="";return function n(c){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r<7&&(a+=d(c>0&&0===e||o>t?"calendar__empty":"calendar__day"),n(c-1,r+1))}(n),'<div class="calendar__week">\n\t\t\t\t\t'.concat(a,"\n\t\t\t\t</div>")},d=function(t){var n="calendar__empty"===t,c='<div class="'.concat(t,'" ').concat(n?"":'data-day="'.concat(o,"-").concat(e,"-").concat(a,'"'),"></div>");return!n&&(o+=1),c};return{getYear:function(t){a=t;var n="";return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e<12&&(n+=c(e),t(e+1))}(),n}}}eventContainer.addEventListener("mouseover",(function(t){t.target.hasAttribute("data-event-id")&&t.target.hasAttribute("data-event-id")!==t.relatedTarget.hasAttribute("data-event-id")&&loadEventInformation(t.target.getAttribute("data-event-id"))})),eventContainer.addEventListener("mouseover",(function(t){t.relatedTarget.hasAttribute("data-event-id")&&!t.target.hasAttribute("data-event-id")&&document.querySelector(".js-vacation-table .calendar-event").remove()})),loadEmployee();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJfRW1wbG95ZWUiLCJFbXBsb3llZSIsImxvYWRFbXBsb3llZSIsImxvYWRFdmVudEluZm9ybWF0aW9uIiwiX0NhbGVuZGFyIiwiQ2FsZW5kYXIiLCJnZXRZZWFyIiwiZXZlbnRDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlbXBsb3llZURhdGEiLCJnZXRFbXBsb3llZUNvbnRlbnQiLCJkYXRhIiwibWFwIiwiaXRlbSIsImNvbmNhdCIsImlkIiwiZ2V0Q29udGVudE9uZUVtcGxveWVlIiwiam9pbiIsIm5hbWUiLCJpbWciLCJ2YWNhdGlvbkRheXNDb3VudCIsImFkZFRvQ29udGFpbmVyIiwiY29udGVudCIsImNvbnRhaW5lclNlbGVjdG9yIiwiaW5uZXJIVE1MIiwiYWRkRXZlbnRzVG9DYWxlbmRhciIsImV2ZW50cyIsImZvckVhY2giLCJldmVudCIsImFkZE9uZUV2ZW50T25lRW1wbG95ZWUiLCJlbXBsb3llZUlkIiwiZGF0ZVN0YXJ0IiwiZGF0ZUVuZCIsImRhdGVTdGFydEV2ZW50Iiwic3BsaXQiLCJwYXJzZUZsb2F0IiwiZGF0ZUVuZEV2ZW50Iiwic3RhcnREYXkiLCJzdGFydE1vbnRoIiwiZW5kRGF5IiwiZW5kTW9udGgiLCJmaW5kRGF5Q29udGFpbmVyIiwiZGF5IiwibW9udGgiLCJhZGRFdmVudENsYXNzQW5kRXZlbnRJZCIsImRheUNvbnRhaW5lciIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImkiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJlbGVtZW50IiwiZ2V0RW1wbG95ZWUiLCJldmVudElkIiwiZXZlbnREYXRhIiwiZW1wbG95ZWVJbmZvcm1hdGlvbiIsImZpbmQiLCJldmVudEluZm9ybWF0aW9uIiwiZXZlbnROYW1lIiwiZ2V0Q2FsZW5kYXJFdmVudCIsImRheXNJbk1vbnRoIiwiZmlyc3REYXkiLCJyZXR1cm5PbmVNb250aCIsIm0iLCJzZXRNb250aERhdGEiLCJtb250aENvbnRhaW4iLCJnZXRXZWVrcyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImdldE9uZVdlZWsiLCJtb250aEluZGV4IiwiRGF0ZSIsImdldERhdGUiLCJmckQiLCJnZXREYXkiLCJ3ZWVrTnVtYmVyIiwiZGF5c0NvbnRlbnQiLCJnZXREYXlzIiwiZ2V0T25lRGF5IiwiZGF5Q2xhc3MiLCJpc0VtcHR5RGF5IiwiZGF5Q29udGVudCIsInllYXJDb250ZW50IiwiZ2V0WWVhckNvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiaGFzQXR0cmlidXRlIiwicmVsYXRlZFRhcmdldCIsImdldEF0dHJpYnV0ZSIsInJlbW92ZSJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQSxJQUFJQSxVQUYyQ0MsV0FBdkNDLGFBR1dGLFVBSFhFLGFBQWNDLHFCQUlLSCxVQUpMRyxxQkFLbEJDLFVBSldDLFdBQVpDLFFBS1dGLFVBTFhFLFFBRUdDLGVBQWlCQyxTQUFTQyxjQUFjLHNCQWdCOUMsU0FBU1IsV0FDUixJQUFJUyxFQUFlLEdBUWJDLEVBQXFCLFNBQUFDLEdBQUksT0FDOUJBLEVBQ0VDLEtBQUksU0FBQUMsR0FBSSxNQUFBLG9CQUFBQyxPQUF3QkQsRUFBS0UsR0FBN0IsT0FBQUQsT0FBcUNFLEVBQXNCSCxHQUFRUixRQUFRUSxFQUFLRSxJQUFoRixhQUNSRSxLQUFLLEtBRUZELEVBQXdCLFNBQUFMLEdBQVEsSUFDL0JPLEVBQWNQLEVBQWRPLEtBQU1DLEVBQVFSLEVBQVJRLElBQ1osTUFBQSw4REFBQUwsT0FDZ0RLLEVBRGhELDhFQUFBTCxPQUUwQ0ksRUFGMUMsdUNBQUFKLE9BSVFILEVBQUtTLGtCQUpiLGFBT0tDLEVBQWlCLFNBQUNDLEVBQVNDLEdBQ2RoQixTQUFTQyxjQUFjZSxHQUMvQkMsV0FBYUYsR0FHbEJHLEVBQXNCLFNBQUFkLEdBQVEsSUFDM0JJLEVBQWVKLEVBQWZJLEdBQWVKLEVBQVhlLE9BQ0xDLFNBQVEsU0FBQUMsR0FBSyxPQUFJ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LEVBQWV0QyxFQUFJLElBR3JCc0MsR0FDT0QsSUEvTFZoRixlQUFla0YsaUJBQWlCLGFBQWEsU0FBQTVELEdBRTNDQSxFQUFNNkQsT0FBT0MsYUFBYSxrQkFDMUI5RCxFQUFNNkQsT0FBT0MsYUFBYSxtQkFBcUI5RCxFQUFNK0QsY0FBY0QsYUFBYSxrQkFFaEZ4RixxQkFBcUIwQixFQUFNNkQsT0FBT0csYUFBYSxxQkFFakR0RixlQUFla0YsaUJBQWlCLGFBQWEsU0FBQTVELEdBQ3hDQSxFQUFNK0QsY0FBY0QsYUFBYSxtQkFBcUI5RCxFQUFNNkQsT0FBT0MsYUFBYSxrQkFDbkZuRixTQUFTQyxjQUFjLHNDQUFzQ3FGLFlBSS9ENUYiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBsb2FkRW1wbG95ZWUsIGxvYWRFdmVudEluZm9ybWF0aW9uIH0gPSBFbXBsb3llZSgpLFxyXG5cdHsgZ2V0WWVhciB9ID0gQ2FsZW5kYXIoKVxyXG5cclxuY29uc3QgZXZlbnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtdmFjYXRpb24tdGFibGUnKVxyXG5ldmVudENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBldmVudCA9PiB7XHJcblx0aWYgKFxyXG5cdFx0ZXZlbnQudGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1ldmVudC1pZCcpICYmXHJcblx0XHRldmVudC50YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWV2ZW50LWlkJykgIT09IGV2ZW50LnJlbGF0ZWRUYXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWV2ZW50LWlkJylcclxuXHQpXHJcblx0XHRsb2FkRXZlbnRJbmZvcm1hdGlvbihldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWV2ZW50LWlkJykpXHJcbn0pXHJcbmV2ZW50Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGV2ZW50ID0+IHtcclxuXHRpZiAoZXZlbnQucmVsYXRlZFRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtZXZlbnQtaWQnKSAmJiAhZXZlbnQudGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1ldmVudC1pZCcpKSB7XHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtdmFjYXRpb24tdGFibGUgLmNhbGVuZGFyLWV2ZW50JykucmVtb3ZlKClcclxuXHR9XHJcbn0pXHJcblxyXG5sb2FkRW1wbG95ZWUoKVxyXG5cclxuZnVuY3Rpb24gRW1wbG95ZWUoKSB7XHJcblx0bGV0IGVtcGxveWVlRGF0YSA9IFtdXHJcblxyXG5cdGNvbnN0IGdldEVtcGxveWVlID0gZGF0YSA9PiB7XHJcblx0XHRlbXBsb3llZURhdGEgPSBkYXRhXHJcblx0XHRhZGRUb0NvbnRhaW5lcihnZXRFbXBsb3llZUNvbnRlbnQoZGF0YSksICcuanMtdmFjYXRpb24tdGFibGUnKVxyXG5cdFx0ZGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4gYWRkRXZlbnRzVG9DYWxlbmRhcihlbGVtZW50KSlcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldEVtcGxveWVlQ29udGVudCA9IGRhdGEgPT5cclxuXHRcdGRhdGFcclxuXHRcdFx0Lm1hcChpdGVtID0+IGA8dHIgZW1wbG95ZWUtaWQ9XCIke2l0ZW0uaWR9XCI+ICR7Z2V0Q29udGVudE9uZUVtcGxveWVlKGl0ZW0pICsgZ2V0WWVhcihpdGVtLmlkKX0gPC90cj5gKVxyXG5cdFx0XHQuam9pbignJylcclxuXHJcblx0Y29uc3QgZ2V0Q29udGVudE9uZUVtcGxveWVlID0gZGF0YSA9PiB7XHJcblx0XHRsZXQgeyBuYW1lLCBpbWcgfSA9IGRhdGFcclxuXHRcdHJldHVybiBgPHRkPlxyXG5cdFx0XHRcdFx0PGltZyBjbGFzcz1cInZhY2F0aW9uX19lbXBsb3llZS1waG90b1wiIHNyYz1cIiR7aW1nfVwiIGFsdD1cIkVtcGxveWVlIGltYWdlXCIgLz5cclxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ2YWNhdGlvbl9fZW1wbG95ZWUtbmFtZVwiPiR7bmFtZX08L2Rpdj5cclxuXHRcdFx0XHQ8L3RkPlxyXG5cdFx0XHRcdDx0ZD4ke2RhdGEudmFjYXRpb25EYXlzQ291bnR9LzI4PC90ZD5gXHJcblx0fVxyXG5cclxuXHRjb25zdCBhZGRUb0NvbnRhaW5lciA9IChjb250ZW50LCBjb250YWluZXJTZWxlY3RvcikgPT4ge1xyXG5cdFx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3RvcilcclxuXHRcdGNvbnRhaW5lci5pbm5lckhUTUwgKz0gY29udGVudFxyXG5cdH1cclxuXHJcblx0Y29uc3QgYWRkRXZlbnRzVG9DYWxlbmRhciA9IGRhdGEgPT4ge1xyXG5cdFx0Y29uc3QgeyBpZCwgZXZlbnRzIH0gPSBkYXRhXHJcblx0XHRldmVudHMuZm9yRWFjaChldmVudCA9PiBhZGRPbmVFdmVudE9uZUVtcGxveWVlKGV2ZW50LCBpZCkpXHJcblx0fVxyXG5cclxuXHRjb25zdCBhZGRPbmVFdmVudE9uZUVtcGxveWVlID0gKGRhdGEsIGVtcGxveWVlSWQpID0+IHtcclxuXHRcdGxldCB7IGlkLCBkYXRlU3RhcnQsIGRhdGVFbmQsIG5hbWUgfSA9IGRhdGEsXHJcblx0XHRcdGRhdGVTdGFydEV2ZW50ID0gZGF0ZVN0YXJ0LnNwbGl0KCcuJykubWFwKHBhcnNlRmxvYXQpLFxyXG5cdFx0XHRkYXRlRW5kRXZlbnQgPSBkYXRlRW5kLnNwbGl0KCcuJykubWFwKHBhcnNlRmxvYXQpLFxyXG5cdFx0XHRzdGFydERheSA9IGRhdGVTdGFydEV2ZW50WzBdLFxyXG5cdFx0XHRzdGFydE1vbnRoID0gZGF0ZVN0YXJ0RXZlbnRbMV0sXHJcblx0XHRcdGVuZERheSA9IGRhdGVFbmRFdmVudFswXSxcclxuXHRcdFx0ZW5kTW9udGggPSBkYXRlRW5kRXZlbnRbMV1cclxuXHJcblx0XHRjb25zdCBmaW5kRGF5Q29udGFpbmVyID0gKGRheSwgbW9udGgpID0+XHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWRheT1cIiR7ZGF5fS0ke21vbnRoIC0gMX0tJHtlbXBsb3llZUlkfVwiXWApXHJcblxyXG5cdFx0Y29uc3QgYWRkRXZlbnRDbGFzc0FuZEV2ZW50SWQgPSAoZGF5Q29udGFpbmVyLCBtb250aCkgPT4ge1xyXG5cdFx0XHRkYXlDb250YWluZXIuY2xhc3NMaXN0LmFkZChgY2FsZW5kYXJfX2RheS0tJHtuYW1lfWApXHJcblx0XHRcdGRheUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtZXZlbnQtaWQnLCBgJHtlbXBsb3llZUlkfS0ke2lkfS0ke21vbnRofWApXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHN0YXJ0TW9udGggPT09IGVuZE1vbnRoKSB7XHJcblx0XHRcdGZvciAobGV0IGkgPSBzdGFydERheTsgaSA8PSBlbmREYXk7IGkrKykge1xyXG5cdFx0XHRcdGFkZEV2ZW50Q2xhc3NBbmRFdmVudElkKGZpbmREYXlDb250YWluZXIoaSwgc3RhcnRNb250aCksIHN0YXJ0TW9udGggLSAxKVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRmb3IgKGxldCBpID0gc3RhcnREYXk7IGkgPD0gMzE7IGkrKykge1xyXG5cdFx0XHRcdGNvbnN0IGRheUNvbnRhaW5lciA9IGZpbmREYXlDb250YWluZXIoaSwgc3RhcnRNb250aClcclxuXHJcblx0XHRcdFx0aWYgKGRheUNvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0YWRkRXZlbnRDbGFzc0FuZEV2ZW50SWQoZGF5Q29udGFpbmVyLCBzdGFydE1vbnRoIC0gMSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gZW5kRGF5OyBpKyspIHtcclxuXHRcdFx0XHRhZGRFdmVudENsYXNzQW5kRXZlbnRJZChmaW5kRGF5Q29udGFpbmVyKGksIGVuZE1vbnRoKSwgZW5kTW9udGggLSAxKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRDYWxlbmRhckV2ZW50ID0gKGVtcGxveWVlSW5mb3JtYXRpb24sIGV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuXHRcdGNvbnN0IHsgbmFtZSwgaW1nIH0gPSBlbXBsb3llZUluZm9ybWF0aW9uLFxyXG5cdFx0XHR7IG5hbWU6IGV2ZW50TmFtZSwgZGF0ZVN0YXJ0LCBkYXRlRW5kIH0gPSBldmVudEluZm9ybWF0aW9uXHJcblx0XHRyZXR1cm4gYDxkaXYgY2xhc3M9XCJjYWxlbmRhci1ldmVudFwiPlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19lbXBsb3llZVwiPlxyXG5cdFx0XHRcdFx0XHQ8aW1nIGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX2VtcGxveWVlLXBob3RvXCIgc3JjPVwiJHtpbWd9XCIgYWx0PVwiRW1wbG95ZWUgaW1hZ2VcIj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19lbXBsb3llZS1uYW1lXCI+JHtuYW1lfTwvZGl2PlxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX2luZm9ybWF0aW9uXCI+XHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjYWxlbmRhci1ldmVudF9fZGF0ZSBjYWxlbmRhci1ldmVudF9fZGF0ZS0tJHtldmVudE5hbWV9XCI+XHJcblx0XHRcdFx0XHRcdFx0JHtkYXRlU3RhcnR9LjIwMjAg4oCUwqAke2RhdGVFbmR9LjIwMjAgKDE00LQuKVxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19uYW1lXCI+0L7RgtC/0YPRgdC6PC9kaXY+XHJcblx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHQ8L2Rpdj5gXHJcblx0fVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0bG9hZEVtcGxveWVlOiAoKSA9PiB7XHJcblx0XHRcdGZldGNoKCdodHRwczovL2R6YWRyYW5pay5naXRodWIuaW8vaS1kZXgvc3JjL2pzL3ZhY2F0aW9uLWNhbGVuZGFyLmpzb24nKVxyXG5cdFx0XHRcdC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuXHRcdFx0XHQudGhlbihkYXRhID0+IGdldEVtcGxveWVlKGRhdGEpKVxyXG5cdFx0fSxcclxuXHRcdGxvYWRFdmVudEluZm9ybWF0aW9uOiBldmVudElkID0+IHtcclxuXHRcdFx0bGV0IGV2ZW50RGF0YSA9IGV2ZW50SWQuc3BsaXQoJy0nKS5tYXAocGFyc2VGbG9hdClcclxuXHRcdFx0bGV0IGVtcGxveWVlSW5mb3JtYXRpb24gPSBlbXBsb3llZURhdGEuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IGV2ZW50RGF0YVswXSksXHJcblx0XHRcdFx0ZXZlbnRJbmZvcm1hdGlvbiA9IGVtcGxveWVlSW5mb3JtYXRpb24uZXZlbnRzLmZpbmQoZXZlbnQgPT4gZXZlbnQuaWQgPT09IGV2ZW50RGF0YVsxXSlcclxuXHRcdFx0YWRkVG9Db250YWluZXIoXHJcblx0XHRcdFx0Z2V0Q2FsZW5kYXJFdmVudChlbXBsb3llZUluZm9ybWF0aW9uLCBldmVudEluZm9ybWF0aW9uKSxcclxuXHRcdFx0XHRgLmpzLW1vbnRoLSR7ZW1wbG95ZWVJbmZvcm1hdGlvbi5pZH0tJHtldmVudERhdGFbMl19YFxyXG5cdFx0XHQpXHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBDYWxlbmRhcigpIHtcclxuXHRsZXQgZGF5c0luTW9udGgsIGZpcnN0RGF5LCBtb250aCwgZW1wbG95ZWVJZCwgZGF5XHJcblx0Ly8gZGF5c0luTW9udGgt0LrQvtC70LjRh9C10YHRgtCy0L4g0LTQvdC10Lkg0LIg0LzQtdGB0Y/RhtC1LFxyXG5cdC8vIGZpcnN0RGF5LdC00LXQvdGMINC90LXQtNC10LvQuCDQv9C10YDQstC+0LPQviDQtNC90Y8sXHJcblx0Ly8gbW9udGgt0LjQvdC00LXQutGBINC80LXRgdGP0YbQsCxcclxuXHQvLyBlbXBsb3llZUlkLSBpZCDRgdC+0YLRgNGD0LTQvdC40LrQsCxcclxuXHQvLyBkYXktINGB0YfQtdGC0YfQuNC6INC00L3QtdC5XHJcblxyXG5cdGNvbnN0IHJldHVybk9uZU1vbnRoID0gbSA9PiB7XHJcblx0XHRkYXkgPSAxXHJcblx0XHRzZXRNb250aERhdGEobSlcclxuXHJcblx0XHRsZXQgbW9udGhDb250YWluID0gJydcclxuXHRcdGNvbnN0IGdldFdlZWtzID0gKGkgPSAwKSA9PiB7XHJcblx0XHRcdGlmIChkYXkgPD0gZGF5c0luTW9udGgpIHtcclxuXHRcdFx0XHRtb250aENvbnRhaW4gKz0gZ2V0T25lV2VlayhpKVxyXG5cdFx0XHRcdGdldFdlZWtzKGkgKyAxKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRnZXRXZWVrcygpXHJcblx0XHRyZXR1cm4gYDx0ZD5cclxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjYWxlbmRhcl9fbW9udGgganMtbW9udGgtJHtlbXBsb3llZUlkfS0ke219XCI+XHJcblx0XHRcdFx0XHRcdCR7bW9udGhDb250YWlufVxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0PC90ZD5gXHJcblx0fVxyXG5cclxuXHRjb25zdCBzZXRNb250aERhdGEgPSBtb250aEluZGV4ID0+IHtcclxuXHRcdG1vbnRoID0gbW9udGhJbmRleFxyXG5cdFx0ZGF5c0luTW9udGggPSBuZXcgRGF0ZSgyMDIwLCBtb250aEluZGV4ICsgMSwgMCkuZ2V0RGF0ZSgpXHJcblx0XHRsZXQgZnJEID0gbmV3IERhdGUoMjAyMCwgbW9udGhJbmRleCwgMSkuZ2V0RGF5KClcclxuXHRcdGZyRCA9PT0gMCA/IChmaXJzdERheSA9IDYpIDogKGZpcnN0RGF5ID0gZnJEIC0gMSlcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldE9uZVdlZWsgPSB3ZWVrTnVtYmVyID0+IHtcclxuXHRcdGxldCBkYXlzQ29udGVudCA9ICcnLFxyXG5cdFx0XHRnZXREYXlzID0gKGZpcnN0RGF5LCBpID0gMCkgPT4ge1xyXG5cdFx0XHRcdGlmIChpIDwgNykge1xyXG5cdFx0XHRcdFx0aWYgKChmaXJzdERheSA+IDAgJiYgd2Vla051bWJlciA9PT0gMCkgfHwgZGF5ID4gZGF5c0luTW9udGgpIHtcclxuXHRcdFx0XHRcdFx0ZGF5c0NvbnRlbnQgKz0gZ2V0T25lRGF5KCdjYWxlbmRhcl9fZW1wdHknKVxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZGF5c0NvbnRlbnQgKz0gZ2V0T25lRGF5KCdjYWxlbmRhcl9fZGF5JylcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRnZXREYXlzKGZpcnN0RGF5IC0gMSwgaSArIDEpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRnZXREYXlzKGZpcnN0RGF5KVxyXG5cdFx0cmV0dXJuIGA8ZGl2IGNsYXNzPVwiY2FsZW5kYXJfX3dlZWtcIj5cclxuXHRcdFx0XHRcdCR7ZGF5c0NvbnRlbnR9XHJcblx0XHRcdFx0PC9kaXY+YFxyXG5cdH1cclxuXHJcblx0Y29uc3QgZ2V0T25lRGF5ID0gZGF5Q2xhc3MgPT4ge1xyXG5cdFx0bGV0IGlzRW1wdHlEYXkgPSBkYXlDbGFzcyA9PT0gJ2NhbGVuZGFyX19lbXB0eScsXHJcblx0XHRcdGRheUNvbnRlbnQgPSBgPGRpdiBjbGFzcz1cIiR7ZGF5Q2xhc3N9XCIgJHtcclxuXHRcdFx0XHRpc0VtcHR5RGF5ID8gJycgOiBgZGF0YS1kYXk9XCIke2RheX0tJHttb250aH0tJHtlbXBsb3llZUlkfVwiYFxyXG5cdFx0XHR9PjwvZGl2PmBcclxuXHRcdGlzRW1wdHlEYXkgPyAnJyA6IChkYXkgPSBkYXkgKyAxKVxyXG5cdFx0cmV0dXJuIGRheUNvbnRlbnRcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRnZXRZZWFyOiBpZCA9PiB7XHJcblx0XHRcdGVtcGxveWVlSWQgPSBpZFxyXG5cdFx0XHRsZXQgeWVhckNvbnRlbnQgPSAnJ1xyXG5cdFx0XHRjb25zdCBnZXRZZWFyQ29udGVudCA9IChpID0gMCkgPT4ge1xyXG5cdFx0XHRcdGlmIChpIDwgMTIpIHtcclxuXHRcdFx0XHRcdHllYXJDb250ZW50ICs9IHJldHVybk9uZU1vbnRoKGkpXHJcblx0XHRcdFx0XHRnZXRZZWFyQ29udGVudChpICsgMSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Z2V0WWVhckNvbnRlbnQoKVxyXG5cdFx0XHRyZXR1cm4geWVhckNvbnRlbnRcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIl19
