"use strict";var _Employee=Employee(),loadEmployee=_Employee.loadEmployee,displayEventInformation=_Employee.displayEventInformation,_Calendar=Calendar(),getYear=_Calendar.getYear;function Employee(){var t=[],n=function(t,n){document.querySelector(n).innerHTML+=t},e=function(){return t.map((function(t){return"<tr> ".concat(a(t)+getYear(t.id)," </tr>")})).join("")},a=function(t){var n=t.name,e=t.img,a=t.vacationDaysCount;return'<td>\n\t\t\t\t\t<img class="vacation__employee-photo" src="'.concat(e,'" alt="Employee image" />\n\t\t\t\t\t<div class="vacation__employee-name">').concat(n,"</div>\n\t\t\t\t</td>\n\t\t\t\t<td>").concat(a,"/28</td>")},o=function(t){var n=t.id;t.events.forEach((function(t){return c(t,n)}))},c=function(t,n){var e=t.id,a=t.name,o=t.dateStart,c=t.dateEnd,r=o.split(".").map(parseFloat),d=c.split(".").map(parseFloat),i=r[0],l=r[1],v=d[0],s=d[1],u=function(t,e){return document.querySelector(".js-day-".concat(t,"-").concat(e-1,"-").concat(n))},m=function(t,o){t.classList.add("calendar__day--".concat(a)),t.setAttribute("data-event-id","".concat(n,"-").concat(e,"-").concat(o))};if(l===s)for(var f=i;f<=v;f++)m(u(f,l),l-1);else{for(var p=i;p<=31;p++){var _=u(p,l);_&&m(_,l-1)}for(var y=1;y<=v;y++)m(u(y,s),s-1)}},r=function(t){return"vacation"===t?"отпуск":"red"===t?"красная метка":"yellow"===t?"желтая метка":""};return{loadEmployee:function(){fetch("https://dzadranik.github.io/i-dex/src/json/vacation-calendar.json").then((function(t){return t.json()})).then((function(a){!function(a){t=a,n(e(),".js-vacation-table")}(a),t.forEach((function(t){return o(t)}))}))},displayEventInformation:function(e){var a=e.split("-").map(parseFloat),o=a[0],c=a[1],d=a[2],i=t.find((function(t){return t.id===o})),l=i.events.find((function(t){return t.id===c}));n(function(t,n){var e=t.name,a=t.img,o=n.name,c=n.dateStart,d=n.dateEnd;return'<div class="calendar-event">\n\t\t\t\t\t<div class="calendar-event__employee">\n\t\t\t\t\t\t<img class="calendar-event__employee-photo" src="'.concat(a,'" alt="Employee image">\n\t\t\t\t\t\t<div class="calendar-event__employee-name">').concat(e,'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="calendar-event__information">\n\t\t\t\t\t\t<div class="calendar-event__date calendar-event__date--').concat(o,'">\n\t\t\t\t\t\t\t').concat(c,".2020 — ").concat(d,'.2020 (14д.)\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="calendar-event__name">').concat(r(o),"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}(i,l),".js-month-".concat(i.id,"-").concat(d))}}}function Calendar(){var t,n,e,a,o,c=function(c){return o=1,function(a){e=a,t=new Date(2020,a+1,0).getDate();var o=new Date(2020,a,1).getDay();n=0===o?6:o-1}(c),'<td>\n\t\t\t\t\t<div class="calendar__month js-month-'.concat(a,"-").concat(c,'"> \n\t\t\t\t\t\t').concat(r(),"\n\t\t\t\t\t</div>\n\t\t\t\t</td>")},r=function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o<=t?n(e+1,a+=d()):a},d=function(){return'<div class="calendar__week">\n\t\t\t\t\t'.concat(i(),"\n\t\t\t\t</div>")},i=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a<7?(n>0&&o<7||o>t?(c+=l("calendar__empty"),n--):c+=l("calendar__day"),e(a+1,c)):c},l=function(t){var n="calendar__empty"===t;return!n&&o++,'<div class="'.concat(t," ").concat(n?"":"js-day-".concat(o-1,"-").concat(e,"-").concat(a),'" ></div>')};return{getYear:function(t){return function(t){a=t}(t),function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n<12?t(n+1,e+=c(n)):e}()}}}window.addEventListener("load",(function(){var t=document.querySelector(".js-vacation-table");t.addEventListener("mouseover",(function(t){t.target.dataset.eventId&&t.target.dataset.eventId!==t.relatedTarget.dataset.eventId&&displayEventInformation(t.target.dataset.eventId)})),t.addEventListener("mouseover",(function(t){t.relatedTarget&&t.relatedTarget.dataset.eventId&&!t.target.dataset.eventId&&document.querySelector(".js-vacation-table .calendar-event").remove()}))})),loadEmployee();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhZ2VzL2pzL3NjcmlwdC5qcyJdLCJuYW1lcyI6WyJfRW1wbG95ZWUiLCJFbXBsb3llZSIsImxvYWRFbXBsb3llZSIsImRpc3BsYXlFdmVudEluZm9ybWF0aW9uIiwiX0NhbGVuZGFyIiwiQ2FsZW5kYXIiLCJnZXRZZWFyIiwiZW1wbG95ZWVzQXJyYXkiLCJhZGRUb0NvbnRhaW5lciIsImNvbnRlbnQiLCJjb250YWluZXJTZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsImdldEVtcGxveWVlc0NvbnRlbnQiLCJtYXAiLCJpdGVtIiwiY29uY2F0IiwiZ2V0Q29udGVudE9uZUVtcGxveWVlIiwiaWQiLCJqb2luIiwiZW1wbG95ZWUiLCJuYW1lIiwiaW1nIiwidmFjYXRpb25EYXlzQ291bnQiLCJhZGRFdmVudHNUb0NhbGVuZGFyIiwiZXZlbnRzIiwiZm9yRWFjaCIsImV2ZW50IiwiYWRkT25lRXZlbnQiLCJlbXBsb3llZUlkIiwiZGF0ZVN0YXJ0IiwiZGF0ZUVuZCIsImRhdGVTdGFydEV2ZW50Iiwic3BsaXQiLCJwYXJzZUZsb2F0IiwiZGF0ZUVuZEV2ZW50Iiwic3RhcnREYXkiLCJzdGFydE1vbnRoIiwiZW5kRGF5IiwiZW5kTW9udGgiLCJmaW5kRGF5Q29udGFpbmVyIiwiZGF5IiwibW9udGgiLCJhZGRFdmVudENsYXNzQW5kQXR0cmlidXRlIiwiZGF5Q29udGFpbmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiaSIsImdldEV2ZW50TmFtZSIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImVtcGxveWVlcyIsImRpc3BsYXlFbXBsb3llZXMiLCJldmVudElkIiwiZXZlbnRJZEFycmF5IiwiZXZlbnREYXkiLCJldmVudE1vbnRoIiwiZXZlbnRFbXBsb3llZUlkIiwiZW1wbG95ZWVJbmZvcm1hdGlvbiIsImZpbmQiLCJldmVudEluZm9ybWF0aW9uIiwiZXZlbnROYW1lIiwiZ2V0Q2FsZW5kYXJFdmVudENvbnRlbnQiLCJkYXlzSW5Nb250aCIsImZpcnN0RGF5IiwiZ2V0T25lTW9udGgiLCJtIiwibW9udGhJbmRleCIsIkRhdGUiLCJnZXREYXRlIiwiZnJEIiwiZ2V0RGF5Iiwic2V0TW9udGhJbmZvcm1hdGlvbiIsImdldFdlZWtzIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiZ2V0T25lV2VlayIsImdldERheXMiLCJkYXlzQ29udGVudCIsImdldE9uZURheSIsImRheUNsYXNzIiwiaXNFbXB0eURheSIsInNldEVtcGxveWVlSWQiLCJnZXRZZWFyQ29udGVudCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudENvbnRhaW5lciIsInRhcmdldCIsImRhdGFzZXQiLCJyZWxhdGVkVGFyZ2V0IiwicmVtb3ZlIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLElBQUlBLFVBRjhDQyxXQUExQ0MsYUFHV0YsVUFIWEUsYUFBY0Msd0JBSVFILFVBSlJHLHdCQUtsQkMsVUFKV0MsV0FBWkMsUUFLV0YsVUFMWEUsUUFrQkgsU0FBU0wsV0FDUixJQUFJTSxFQUFpQixHQUVmQyxFQUFpQixTQUFDQyxFQUFTQyxHQUNkQyxTQUFTQyxjQUFjRixHQUMvQkcsV0FBYUosR0FRbEJLLEVBQXNCLFdBQUEsT0FDM0JQLEVBQWVRLEtBQUksU0FBQUMsR0FBSSxNQUFBLFFBQUFDLE9BQVlDLEVBQXNCRixHQUFRVixRQUFRVSxFQUFLRyxJQUF2RCxhQUFvRUMsS0FBSyxLQUUzRkYsRUFBd0IsU0FBQUcsR0FBWSxJQUNuQ0MsRUFBaUNELEVBQWpDQyxLQUFNQyxFQUEyQkYsRUFBM0JFLElBQUtDLEVBQXNCSCxFQUF0Qkcsa0JBQ2pCLE1BQUEsOERBQUFQLE9BQ2dETSxFQURoRCw4RUFBQU4sT0FFMENLLEVBRjFDLHVDQUFBTCxPQUlRTyxFQUpSLGFBV0tDLEVBQXNCLFNBQUFKLEdBQVksSUFDL0JGLEVBQWVFLEVBQWZGLEdBQWVFLEVBQVhLLE9BQ0xDLFNBQVEsU0FBQUMsR0FBSyxPQUFJ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NENhLEdBQTlFLGNBR0QsTUFBTyxDQUNOeEIsUUFBUyxTQUFBYSxHQUVSLE9BckVvQixTQUFBQSxHQUNiVyxFQUFhWCxFQW1FcEJvRSxDQUFjcEUsR0F6RE8sU0FBakJxRSxJQUEwQyxJQUF4QnZDLEVBQXdCNkIsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBcEIsRUFBR3JFLEVBQWlCcUUsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBUCxHQUN4QyxPQUFJN0IsRUFBSSxHQUVBdUMsRUFBZXZDLEVBQUksRUFEMUJ4QyxHQUFXNEQsRUFBWXBCLElBR2hCeEMsRUFxREErRSxLQXROVkMsT0FBT0MsaUJBQWlCLFFBQVEsV0FDL0IsSUFBTUMsRUFBaUJoRixTQUFTQyxjQUFjLHNCQUU5QytFLEVBQWVELGlCQUFpQixhQUFhLFNBQUE5RCxHQUN4Q0EsRUFBTWdFLE9BQU9DLFFBQVFwQyxTQUFXN0IsRUFBTWdFLE9BQU9DLFFBQVFwQyxVQUFZN0IsRUFBTWtFLGNBQWNELFFBQVFwQyxTQUNoR3RELHdCQUF3QnlCLEVBQU1nRSxPQUFPQyxRQUFRcEMsWUFFL0NrQyxFQUFlRCxpQkFBaUIsYUFBYSxTQUFBOUQsR0FFeENBLEVBQU1rRSxlQUFpQmxFLEVBQU1rRSxjQUFjRCxRQUFRcEMsVUFBWTdCLEVBQU1nRSxPQUFPQyxRQUFRcEMsU0FDdkY5QyxTQUFTQyxjQUFjLHNDQUFzQ21GLGVBSWhFN0YiLCJmaWxlIjoicGFnZXMvanMvc2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBsb2FkRW1wbG95ZWUsIGRpc3BsYXlFdmVudEluZm9ybWF0aW9uIH0gPSBFbXBsb3llZSgpLFxyXG5cdHsgZ2V0WWVhciB9ID0gQ2FsZW5kYXIoKVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcblx0Y29uc3QgZXZlbnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtdmFjYXRpb24tdGFibGUnKVxyXG5cclxuXHRldmVudENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBldmVudCA9PiB7XHJcblx0XHRpZiAoZXZlbnQudGFyZ2V0LmRhdGFzZXQuZXZlbnRJZCAmJiBldmVudC50YXJnZXQuZGF0YXNldC5ldmVudElkICE9PSBldmVudC5yZWxhdGVkVGFyZ2V0LmRhdGFzZXQuZXZlbnRJZClcclxuXHRcdFx0ZGlzcGxheUV2ZW50SW5mb3JtYXRpb24oZXZlbnQudGFyZ2V0LmRhdGFzZXQuZXZlbnRJZClcclxuXHR9KVxyXG5cdGV2ZW50Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGV2ZW50ID0+IHtcclxuXHRcdC8vZXZlbnQucmVsYXRlZFRhcmdldCDQv9GA0L7QstC10YDQutCwINGH0YLQvtCx0Ysg0L/RgNC4INC00LLQuNC20LXQvdC40Lgg0LjQtyDQutC+0L3RgdC+0LvQuCDQvdC1INCy0YvQu9C10YLQsNC70LAg0L7RiNC40LHQutCwXHJcblx0XHRpZiAoZXZlbnQucmVsYXRlZFRhcmdldCAmJiBldmVudC5yZWxhdGVkVGFyZ2V0LmRhdGFzZXQuZXZlbnRJZCAmJiAhZXZlbnQudGFyZ2V0LmRhdGFzZXQuZXZlbnRJZCkge1xyXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtdmFjYXRpb24tdGFibGUgLmNhbGVuZGFyLWV2ZW50JykucmVtb3ZlKClcclxuXHRcdH1cclxuXHR9KVxyXG59KVxyXG5sb2FkRW1wbG95ZWUoKVxyXG5cclxuZnVuY3Rpb24gRW1wbG95ZWUoKSB7XHJcblx0bGV0IGVtcGxveWVlc0FycmF5ID0gW11cclxuXHJcblx0Y29uc3QgYWRkVG9Db250YWluZXIgPSAoY29udGVudCwgY29udGFpbmVyU2VsZWN0b3IpID0+IHtcclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpXHJcblx0XHRjb250YWluZXIuaW5uZXJIVE1MICs9IGNvbnRlbnRcclxuXHR9XHJcblxyXG5cdGNvbnN0IGRpc3BsYXlFbXBsb3llZXMgPSBlbXBsb3llZXMgPT4ge1xyXG5cdFx0ZW1wbG95ZWVzQXJyYXkgPSBlbXBsb3llZXNcclxuXHRcdGFkZFRvQ29udGFpbmVyKGdldEVtcGxveWVlc0NvbnRlbnQoKSwgJy5qcy12YWNhdGlvbi10YWJsZScpXHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRFbXBsb3llZXNDb250ZW50ID0gKCkgPT5cclxuXHRcdGVtcGxveWVlc0FycmF5Lm1hcChpdGVtID0+IGA8dHI+ICR7Z2V0Q29udGVudE9uZUVtcGxveWVlKGl0ZW0pICsgZ2V0WWVhcihpdGVtLmlkKX0gPC90cj5gKS5qb2luKCcnKVxyXG5cclxuXHRjb25zdCBnZXRDb250ZW50T25lRW1wbG95ZWUgPSBlbXBsb3llZSA9PiB7XHJcblx0XHRsZXQgeyBuYW1lLCBpbWcsIHZhY2F0aW9uRGF5c0NvdW50IH0gPSBlbXBsb3llZVxyXG5cdFx0cmV0dXJuIGA8dGQ+XHJcblx0XHRcdFx0XHQ8aW1nIGNsYXNzPVwidmFjYXRpb25fX2VtcGxveWVlLXBob3RvXCIgc3JjPVwiJHtpbWd9XCIgYWx0PVwiRW1wbG95ZWUgaW1hZ2VcIiAvPlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInZhY2F0aW9uX19lbXBsb3llZS1uYW1lXCI+JHtuYW1lfTwvZGl2PlxyXG5cdFx0XHRcdDwvdGQ+XHJcblx0XHRcdFx0PHRkPiR7dmFjYXRpb25EYXlzQ291bnR9LzI4PC90ZD5gXHJcblx0fVxyXG5cclxuXHRjb25zdCBkaXNwbGF5RW1wbG95ZWVzRXZlbnRzID0gKCkgPT4ge1xyXG5cdFx0ZW1wbG95ZWVzQXJyYXkuZm9yRWFjaChlbXBsb3llZSA9PiBhZGRFdmVudHNUb0NhbGVuZGFyKGVtcGxveWVlKSlcclxuXHR9XHJcblxyXG5cdGNvbnN0IGFkZEV2ZW50c1RvQ2FsZW5kYXIgPSBlbXBsb3llZSA9PiB7XHJcblx0XHRjb25zdCB7IGlkLCBldmVudHMgfSA9IGVtcGxveWVlXHJcblx0XHRldmVudHMuZm9yRWFjaChldmVudCA9PiBhZGRPbmVFdmVudChldmVudCwgaWQpKVxyXG5cdH1cclxuXHJcblx0Y29uc3QgYWRkT25lRXZlbnQgPSAoZXZlbnQsIGVtcGxveWVlSWQpID0+IHtcclxuXHRcdGxldCB7IGlkLCBuYW1lLCBkYXRlU3RhcnQsIGRhdGVFbmQgfSA9IGV2ZW50LFxyXG5cdFx0XHRkYXRlU3RhcnRFdmVudCA9IGRhdGVTdGFydC5zcGxpdCgnLicpLm1hcChwYXJzZUZsb2F0KSxcclxuXHRcdFx0ZGF0ZUVuZEV2ZW50ID0gZGF0ZUVuZC5zcGxpdCgnLicpLm1hcChwYXJzZUZsb2F0KSxcclxuXHRcdFx0c3RhcnREYXkgPSBkYXRlU3RhcnRFdmVudFswXSxcclxuXHRcdFx0c3RhcnRNb250aCA9IGRhdGVTdGFydEV2ZW50WzFdLFxyXG5cdFx0XHRlbmREYXkgPSBkYXRlRW5kRXZlbnRbMF0sXHJcblx0XHRcdGVuZE1vbnRoID0gZGF0ZUVuZEV2ZW50WzFdXHJcblxyXG5cdFx0Y29uc3QgZmluZERheUNvbnRhaW5lciA9IChkYXksIG1vbnRoKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuanMtZGF5LSR7ZGF5fS0ke21vbnRoIC0gMX0tJHtlbXBsb3llZUlkfWApXHJcblxyXG5cdFx0Y29uc3QgYWRkRXZlbnRDbGFzc0FuZEF0dHJpYnV0ZSA9IChkYXlDb250YWluZXIsIG1vbnRoKSA9PiB7XHJcblx0XHRcdGRheUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGBjYWxlbmRhcl9fZGF5LS0ke25hbWV9YClcclxuXHRcdFx0ZGF5Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1ldmVudC1pZCcsIGAke2VtcGxveWVlSWR9LSR7aWR9LSR7bW9udGh9YClcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoc3RhcnRNb250aCA9PT0gZW5kTW9udGgpIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IHN0YXJ0RGF5OyBpIDw9IGVuZERheTsgaSsrKSB7XHJcblx0XHRcdFx0YWRkRXZlbnRDbGFzc0FuZEF0dHJpYnV0ZShmaW5kRGF5Q29udGFpbmVyKGksIHN0YXJ0TW9udGgpLCBzdGFydE1vbnRoIC0gMSlcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IHN0YXJ0RGF5OyBpIDw9IDMxOyBpKyspIHtcclxuXHRcdFx0XHRjb25zdCBkYXlDb250YWluZXIgPSBmaW5kRGF5Q29udGFpbmVyKGksIHN0YXJ0TW9udGgpXHJcblxyXG5cdFx0XHRcdGlmIChkYXlDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdGFkZEV2ZW50Q2xhc3NBbmRBdHRyaWJ1dGUoZGF5Q29udGFpbmVyLCBzdGFydE1vbnRoIC0gMSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gZW5kRGF5OyBpKyspIHtcclxuXHRcdFx0XHRhZGRFdmVudENsYXNzQW5kQXR0cmlidXRlKGZpbmREYXlDb250YWluZXIoaSwgZW5kTW9udGgpLCBlbmRNb250aCAtIDEpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldENhbGVuZGFyRXZlbnRDb250ZW50ID0gKGVtcGxveWVlSW5mb3JtYXRpb24sIGV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuXHRcdGNvbnN0IHsgbmFtZSwgaW1nIH0gPSBlbXBsb3llZUluZm9ybWF0aW9uLFxyXG5cdFx0XHR7IG5hbWU6IGV2ZW50TmFtZSwgZGF0ZVN0YXJ0LCBkYXRlRW5kIH0gPSBldmVudEluZm9ybWF0aW9uXHJcblx0XHRyZXR1cm4gYDxkaXYgY2xhc3M9XCJjYWxlbmRhci1ldmVudFwiPlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19lbXBsb3llZVwiPlxyXG5cdFx0XHRcdFx0XHQ8aW1nIGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX2VtcGxveWVlLXBob3RvXCIgc3JjPVwiJHtpbWd9XCIgYWx0PVwiRW1wbG95ZWUgaW1hZ2VcIj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19lbXBsb3llZS1uYW1lXCI+JHtuYW1lfTwvZGl2PlxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX2luZm9ybWF0aW9uXCI+XHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjYWxlbmRhci1ldmVudF9fZGF0ZSBjYWxlbmRhci1ldmVudF9fZGF0ZS0tJHtldmVudE5hbWV9XCI+XHJcblx0XHRcdFx0XHRcdFx0JHtkYXRlU3RhcnR9LjIwMjAg4oCUwqAke2RhdGVFbmR9LjIwMjAgKDE00LQuKVxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19uYW1lXCI+JHtnZXRFdmVudE5hbWUoZXZlbnROYW1lKX08L2Rpdj5cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdDwvZGl2PmBcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldEV2ZW50TmFtZSA9IG5hbWUgPT4ge1xyXG5cdFx0cmV0dXJuIG5hbWUgPT09ICd2YWNhdGlvbidcclxuXHRcdFx0PyAn0L7RgtC/0YPRgdC6J1xyXG5cdFx0XHQ6IG5hbWUgPT09ICdyZWQnXHJcblx0XHRcdD8gJ9C60YDQsNGB0L3QsNGPINC80LXRgtC60LAnXHJcblx0XHRcdDogbmFtZSA9PT0gJ3llbGxvdydcclxuXHRcdFx0PyAn0LbQtdC70YLQsNGPINC80LXRgtC60LAnXHJcblx0XHRcdDogJydcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRsb2FkRW1wbG95ZWU6ICgpID0+IHtcclxuXHRcdFx0ZmV0Y2goJ2h0dHBzOi8vZHphZHJhbmlrLmdpdGh1Yi5pby9pLWRleC9zcmMvanNvbi92YWNhdGlvbi1jYWxlbmRhci5qc29uJylcclxuXHRcdFx0XHQudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcblx0XHRcdFx0LnRoZW4oZW1wbG95ZWVzID0+IHtcclxuXHRcdFx0XHRcdGRpc3BsYXlFbXBsb3llZXMoZW1wbG95ZWVzKVxyXG5cdFx0XHRcdFx0ZGlzcGxheUVtcGxveWVlc0V2ZW50cygpXHJcblx0XHRcdFx0fSlcclxuXHRcdH0sXHJcblx0XHRkaXNwbGF5RXZlbnRJbmZvcm1hdGlvbjogZXZlbnRJZCA9PiB7XHJcblx0XHRcdC8vZXZlbnRJZFtkYXksIG1vbnRoLCBlbXBsb3llZUlkXVxyXG5cdFx0XHRsZXQgZXZlbnRJZEFycmF5ID0gZXZlbnRJZC5zcGxpdCgnLScpLm1hcChwYXJzZUZsb2F0KSxcclxuXHRcdFx0XHRldmVudERheSA9IGV2ZW50SWRBcnJheVswXSxcclxuXHRcdFx0XHRldmVudE1vbnRoID0gZXZlbnRJZEFycmF5WzFdLFxyXG5cdFx0XHRcdGV2ZW50RW1wbG95ZWVJZCA9IGV2ZW50SWRBcnJheVsyXSxcclxuXHRcdFx0XHRlbXBsb3llZUluZm9ybWF0aW9uID0gZW1wbG95ZWVzQXJyYXkuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IGV2ZW50RGF5KSxcclxuXHRcdFx0XHRldmVudEluZm9ybWF0aW9uID0gZW1wbG95ZWVJbmZvcm1hdGlvbi5ldmVudHMuZmluZChldmVudCA9PiBldmVudC5pZCA9PT0gZXZlbnRNb250aClcclxuXHJcblx0XHRcdGFkZFRvQ29udGFpbmVyKFxyXG5cdFx0XHRcdGdldENhbGVuZGFyRXZlbnRDb250ZW50KGVtcGxveWVlSW5mb3JtYXRpb24sIGV2ZW50SW5mb3JtYXRpb24pLFxyXG5cdFx0XHRcdGAuanMtbW9udGgtJHtlbXBsb3llZUluZm9ybWF0aW9uLmlkfS0ke2V2ZW50RW1wbG95ZWVJZH1gXHJcblx0XHRcdClcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIENhbGVuZGFyKCkge1xyXG5cdGxldCBkYXlzSW5Nb250aCwgZmlyc3REYXksIG1vbnRoLCBlbXBsb3llZUlkLCBkYXlcclxuXHQvLyBkYXlzSW5Nb250aC3QutC+0LvQuNGH0LXRgdGC0LLQviDQtNC90LXQuSDQsiDQvNC10YHRj9GG0LUsXHJcblx0Ly8gZmlyc3REYXkt0LTQtdC90Ywg0L3QtdC00LXQu9C4INC/0LXRgNCy0L7Qs9C+INC00L3RjyxcclxuXHQvLyBtb250aC3QuNC90LTQtdC60YEg0LzQtdGB0Y/RhtCwLFxyXG5cdC8vIGVtcGxveWVlSWQtIGlkINGB0L7RgtGA0YPQtNC90LjQutCwINC00LvRjyDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8ganMtbW9udGgtKiog0LrQu9Cw0YHRgdCwLFxyXG5cdC8vIGRheS0g0YHRh9C10YLRh9C40Log0LTQvdC10LlcclxuXHJcblx0Y29uc3Qgc2V0RW1wbG95ZWVJZCA9IGlkID0+IHtcclxuXHRcdHJldHVybiAoZW1wbG95ZWVJZCA9IGlkKVxyXG5cdH1cclxuXHJcblx0Y29uc3Qgc2V0TW9udGhJbmZvcm1hdGlvbiA9IG1vbnRoSW5kZXggPT4ge1xyXG5cdFx0bW9udGggPSBtb250aEluZGV4XHJcblx0XHRkYXlzSW5Nb250aCA9IG5ldyBEYXRlKDIwMjAsIG1vbnRoSW5kZXggKyAxLCAwKS5nZXREYXRlKClcclxuXHRcdGxldCBmckQgPSBuZXcgRGF0ZSgyMDIwLCBtb250aEluZGV4LCAxKS5nZXREYXkoKVxyXG5cdFx0ZnJEID09PSAwID8gKGZpcnN0RGF5ID0gNikgOiAoZmlyc3REYXkgPSBmckQgLSAxKSAvL9GB0LTQtdC70LDRgtGMINC+0YLRgdGH0LXRgiDQtNC90LXQuSDQvdC10LTQtdC70Lgg0YEg0L/QvtC90LXQtNC10LvRjNC90LjQutCwXHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRZZWFyQ29udGVudCA9IChpID0gMCwgY29udGVudCA9ICcnKSA9PiB7XHJcblx0XHRpZiAoaSA8IDEyKSB7XHJcblx0XHRcdGNvbnRlbnQgKz0gZ2V0T25lTW9udGgoaSlcclxuXHRcdFx0cmV0dXJuIGdldFllYXJDb250ZW50KGkgKyAxLCBjb250ZW50KVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIGNvbnRlbnRcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldE9uZU1vbnRoID0gbSA9PiB7XHJcblx0XHRkYXkgPSAxXHJcblx0XHRzZXRNb250aEluZm9ybWF0aW9uKG0pXHJcblx0XHQvL2pzLW1vbnRoLXtlbXBsb3llZUlkfS17bW9udGh9INGE0L7RgNC80LjRgNGD0LXRgtGB0Y8g0LrQu9Cw0YHRgSDQtNC70Y8g0L/QvtC40YHQutCwINC00L3RjyA9PiDQvtGC0L7QsdGA0LDQt9C40YLRjCBldmVudFxyXG5cdFx0cmV0dXJuIGA8dGQ+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY2FsZW5kYXJfX21vbnRoIGpzLW1vbnRoLSR7ZW1wbG95ZWVJZH0tJHttfVwiPiBcclxuXHRcdFx0XHRcdFx0JHtnZXRXZWVrcygpfVxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0PC90ZD5gXHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRXZWVrcyA9IChpID0gMCwgY29udGVudCA9ICcnKSA9PiB7XHJcblx0XHRpZiAoZGF5IDw9IGRheXNJbk1vbnRoKSB7XHJcblx0XHRcdGNvbnRlbnQgKz0gZ2V0T25lV2VlaygpXHJcblx0XHRcdHJldHVybiBnZXRXZWVrcyhpICsgMSwgY29udGVudClcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBjb250ZW50XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRPbmVXZWVrID0gKCkgPT4ge1xyXG5cdFx0cmV0dXJuIGA8ZGl2IGNsYXNzPVwiY2FsZW5kYXJfX3dlZWtcIj5cclxuXHRcdFx0XHRcdCR7Z2V0RGF5cygpfVxyXG5cdFx0XHRcdDwvZGl2PmBcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldERheXMgPSAoaSA9IDAsIGRheXNDb250ZW50ID0gJycpID0+IHtcclxuXHRcdGlmIChpIDwgNykge1xyXG5cdFx0XHRpZiAoKGZpcnN0RGF5ID4gMCAmJiBkYXkgPCA3KSB8fCBkYXkgPiBkYXlzSW5Nb250aCkge1xyXG5cdFx0XHRcdGRheXNDb250ZW50ICs9IGdldE9uZURheSgnY2FsZW5kYXJfX2VtcHR5JylcclxuXHRcdFx0XHRmaXJzdERheS0tXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZGF5c0NvbnRlbnQgKz0gZ2V0T25lRGF5KCdjYWxlbmRhcl9fZGF5JylcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZ2V0RGF5cyhpICsgMSwgZGF5c0NvbnRlbnQpXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZGF5c0NvbnRlbnRcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldE9uZURheSA9IGRheUNsYXNzID0+IHtcclxuXHRcdGxldCBpc0VtcHR5RGF5ID0gZGF5Q2xhc3MgPT09ICdjYWxlbmRhcl9fZW1wdHknXHJcblx0XHQhaXNFbXB0eURheSA/IGRheSsrIDogJydcclxuXHRcdC8v0YfRgtC+0LHRiyDQvdC1INCy0LLQvtC00LjRgtGMINC70LjRiNC90Y7RjiDQv9C10YDQtdC80LXQvdC90YPRjiDRgdC90LDRh9Cw0LvQsCDQv9GA0LjQsdCw0LLQuNGC0Ywg0LTQtdC90YwsINCwINCyINGE0L7RgNC80LjRgNC+0LLQsNC90LjQuCDQutC70LDRgdGB0LAg0LXQs9C+INCy0YvRh9C10YHRgtGMXHJcblx0XHRyZXR1cm4gYDxkaXYgY2xhc3M9XCIke2RheUNsYXNzfSAkeyFpc0VtcHR5RGF5ID8gYGpzLWRheS0ke2RheSAtIDF9LSR7bW9udGh9LSR7ZW1wbG95ZWVJZH1gIDogYGB9XCIgPjwvZGl2PmBcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRnZXRZZWFyOiBpZCA9PiB7XHJcblx0XHRcdHNldEVtcGxveWVlSWQoaWQpXHJcblx0XHRcdHJldHVybiBnZXRZZWFyQ29udGVudCgpXHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiJdfQ==
