"use strict";var _Employee=Employee(),loadEmployee=_Employee.loadEmployee,displayEventInformation=_Employee.displayEventInformation,_Calendar=Calendar(),getYear=_Calendar.getYear;function Employee(){var t=[],n=function(t,n){document.querySelector(n).innerHTML+=t},e=function(){return t.map((function(t){return"<tr> ".concat(a(t)+getYear(t.id)," </tr>")})).join("")},a=function(t){var n=t.name,e=t.img,a=t.vacationDaysCount;return'<td>\n\t\t\t\t\t<img class="vacation__employee-photo" src="'.concat(e,'" alt="Employee image" />\n\t\t\t\t\t<div class="vacation__employee-name">').concat(n,"</div>\n\t\t\t\t</td>\n\t\t\t\t<td>").concat(a,"/28</td>")},c=function(t){var n=t.id;t.events.forEach((function(t){return o(t,n)}))},o=function(t,n){var e=t.id,a=t.name,c=t.dateStart,o=t.dateEnd,r=c.split(".").map(parseFloat),d=o.split(".").map(parseFloat),i=r[0],l=r[1],v=d[0],s=d[1],u=function(t,e){return document.querySelector(".js-day-".concat(t,"-").concat(e-1,"-").concat(n))},m=function(t,c){t.classList.add("calendar__day--".concat(a)),t.setAttribute("data-event-id","".concat(n,"-").concat(e,"-").concat(c))};if(l===s)for(var f=i;f<=v;f++)m(u(f,l),l-1);else{for(var p=i;p<=31;p++){var _=u(p,l);_&&m(_,l-1)}for(var y=1;y<=v;y++)m(u(y,s),s-1)}},r=function(t){return"vacation"===t?"отпуск":"red"===t?"красная метка":"yellow"===t?"желтая метка":""};return{loadEmployee:function(){fetch("https://dzadranik.github.io/i-dex/src/js/vacation-calendar.json").then((function(t){return t.json()})).then((function(a){!function(a){t=a,n(e(),".js-vacation-table")}(a),t.forEach((function(t){return c(t)}))}))},displayEventInformation:function(e){var a=e.split("-").map(parseFloat),c=a[0],o=a[1],d=a[2],i=t.find((function(t){return t.id===c})),l=i.events.find((function(t){return t.id===o}));n(function(t,n){var e=t.name,a=t.img,c=n.name,o=n.dateStart,d=n.dateEnd;return'<div class="calendar-event">\n\t\t\t\t\t<div class="calendar-event__employee">\n\t\t\t\t\t\t<img class="calendar-event__employee-photo" src="'.concat(a,'" alt="Employee image">\n\t\t\t\t\t\t<div class="calendar-event__employee-name">').concat(e,'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="calendar-event__information">\n\t\t\t\t\t\t<div class="calendar-event__date calendar-event__date--').concat(c,'">\n\t\t\t\t\t\t\t').concat(o,".2020 — ").concat(d,'.2020 (14д.)\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="calendar-event__name">').concat(r(c),"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}(i,l),".js-month-".concat(i.id,"-").concat(d))}}}function Calendar(){var t,n,e,a,c,o=function(o){return c=1,function(a){e=a,t=new Date(2020,a+1,0).getDate();var c=new Date(2020,a,1).getDay();n=0===c?6:c-1}(o),'<td>\n\t\t\t\t\t<div class="calendar__month js-month-'.concat(a,"-").concat(o,'"> \n\t\t\t\t\t\t').concat(r(),"\n\t\t\t\t\t</div>\n\t\t\t\t</td>")},r=function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c<=t?n(e+1,a+=d()):a},d=function(){return'<div class="calendar__week">\n\t\t\t\t\t'.concat(i(),"\n\t\t\t\t</div>")},i=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a<7?(n>0&&c<7||c>t?(o+=l("calendar__empty"),n--):o+=l("calendar__day"),e(a+1,o)):o},l=function(t){var n="calendar__empty"===t;return!n&&c++,'<div class="'.concat(t," ").concat(n?"":"js-day-".concat(c-1,"-").concat(e,"-").concat(a),'" ></div>')};return{getYear:function(t){return function(t){a=t}(t),function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n<12?t(n+1,e+=o(n)):e}()}}}window.addEventListener("load",(function(){var t=document.querySelector(".js-vacation-table");t.addEventListener("mouseover",(function(t){t.target.dataset.eventId&&t.target.dataset.eventId!==t.relatedTarget.dataset.eventId&&displayEventInformation(t.target.dataset.eventId)})),t.addEventListener("mouseover",(function(t){t.relatedTarget&&t.relatedTarget.dataset.eventId&&!t.target.dataset.eventId&&document.querySelector(".js-vacation-table .calendar-event").remove()}))})),loadEmployee();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhZ2VzL2pzL3NjcmlwdC5qcyJdLCJuYW1lcyI6WyJfRW1wbG95ZWUiLCJFbXBsb3llZSIsImxvYWRFbXBsb3llZSIsImRpc3BsYXlFdmVudEluZm9ybWF0aW9uIiwiX0NhbGVuZGFyIiwiQ2FsZW5kYXIiLCJnZXRZZWFyIiwiZW1wbG95ZWVzQXJyYXkiLCJhZGRUb0NvbnRhaW5lciIsImNvbnRlbnQiLCJjb250YWluZXJTZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsImdldEVtcGxveWVlc0NvbnRlbnQiLCJtYXAiLCJpdGVtIiwiY29uY2F0IiwiZ2V0Q29udGVudE9uZUVtcGxveWVlIiwiaWQiLCJqb2luIiwiZW1wbG95ZWUiLCJuYW1lIiwiaW1nIiwidmFjYXRpb25EYXlzQ291bnQiLCJhZGRFdmVudHNUb0NhbGVuZGFyIiwiZXZlbnRzIiwiZm9yRWFjaCIsImV2ZW50IiwiYWRkT25lRXZlbnQiLCJlbXBsb3llZUlkIiwiZGF0ZVN0YXJ0IiwiZGF0ZUVuZCIsImRhdGVTdGFydEV2ZW50Iiwic3BsaXQiLCJwYXJzZUZsb2F0IiwiZGF0ZUVuZEV2ZW50Iiwic3RhcnREYXkiLCJzdGFydE1vbnRoIiwiZW5kRGF5IiwiZW5kTW9udGgiLCJmaW5kRGF5Q29udGFpbmVyIiwiZGF5IiwibW9udGgiLCJhZGRFdmVudENsYXNzQW5kQXR0cmlidXRlIiwiZGF5Q29udGFpbmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiaSIsImdldEV2ZW50TmFtZSIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImVtcGxveWVlcyIsImRpc3BsYXlFbXBsb3llZXMiLCJldmVudElkIiwiZXZlbnRJZEFycmF5IiwiZXZlbnREYXkiLCJldmVudE1vbnRoIiwiZXZlbnRFbXBsb3llZUlkIiwiZW1wbG95ZWVJbmZvcm1hdGlvbiIsImZpbmQiLCJldmVudEluZm9ybWF0aW9uIiwiZXZlbnROYW1lIiwiZ2V0Q2FsZW5kYXJFdmVudENvbnRlbnQiLCJkYXlzSW5Nb250aCIsImZpcnN0RGF5IiwiZ2V0T25lTW9udGgiLCJtIiwibW9udGhJbmRleCIsIkRhdGUiLCJnZXREYXRlIiwiZnJEIiwiZ2V0RGF5Iiwic2V0TW9udGhJbmZvcm1hdGlvbiIsImdldFdlZWtzIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiZ2V0T25lV2VlayIsImdldERheXMiLCJkYXlzQ29udGVudCIsImdldE9uZURheSIsImRheUNsYXNzIiwiaXNFbXB0eURheSIsInNldEVtcGxveWVlSWQiLCJnZXRZZWFyQ29udGVudCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudENvbnRhaW5lciIsInRhcmdldCIsImRhdGFzZXQiLCJyZWxhdGVkVGFyZ2V0IiwicmVtb3ZlIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLElBQUlBLFVBRjhDQyxXQUExQ0MsYUFHV0YsVUFIWEUsYUFBY0Msd0JBSVFILFVBSlJHLHdCQUtsQkMsVUFKV0MsV0FBWkMsUUFLV0YsVUFMWEUsUUFrQkgsU0FBU0wsV0FDUixJQUFJTSxFQUFpQixHQUVmQyxFQUFpQixTQUFDQyxFQUFTQyxHQUNkQyxTQUFTQyxjQUFjRixHQUMvQkcsV0FBYUosR0FRbEJLLEVBQXNCLFdBQUEsT0FDM0JQLEVBQWVRLEtBQUksU0FBQUMsR0FBSSxNQUFBLFFBQUFDLE9BQVlDLEVBQXNCRixHQUFRVixRQUFRVSxFQUFLRyxJQUF2RCxhQUFvRUMsS0FBSyxLQUUzRkYsRUFBd0IsU0FBQUcsR0FBWSxJQUNuQ0MsRUFBaUNELEVBQWpDQyxLQUFNQyxFQUEyQkYsRUFBM0JFLElBQUtDLEVBQXNCSCxFQUF0Qkcsa0JBQ2pCLE1BQUEsOERBQUFQLE9BQ2dETSxFQURoRCw4RUFBQU4sT0FFMENLLEVBRjFDLHVDQUFBTCxPQUlRTyxFQUpSLGFBV0tDLEVBQXNCLFNBQUFKLEdBQVksSUFDL0JGLEVBQWVFLEVBQWZGLEdBQWVFLEVBQVhLLE9BQ0xDLFNBQVEsU0FBQUMsR0FBSyxPQUFJ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NENhLEdBQTlFLGNBR0QsTUFBTyxDQUNOeEIsUUFBUyxTQUFBYSxHQUVSLE9BckVvQixTQUFBQSxHQUNiVyxFQUFhWCxFQW1FcEJvRSxDQUFjcEUsR0F6RE8sU0FBakJxRSxJQUEwQyxJQUF4QnZDLEVBQXdCNkIsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBcEIsRUFBR3JFLEVBQWlCcUUsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBUCxHQUN4QyxPQUFJN0IsRUFBSSxHQUVBdUMsRUFBZXZDLEVBQUksRUFEMUJ4QyxHQUFXNEQsRUFBWXBCLElBR2hCeEMsRUFxREErRSxLQXROVkMsT0FBT0MsaUJBQWlCLFFBQVEsV0FDL0IsSUFBTUMsRUFBaUJoRixTQUFTQyxjQUFjLHNCQUU5QytFLEVBQWVELGlCQUFpQixhQUFhLFNBQUE5RCxHQUN4Q0EsRUFBTWdFLE9BQU9DLFFBQVFwQyxTQUFXN0IsRUFBTWdFLE9BQU9DLFFBQVFwQyxVQUFZN0IsRUFBTWtFLGNBQWNELFFBQVFwQyxTQUNoR3RELHdCQUF3QnlCLEVBQU1nRSxPQUFPQyxRQUFRcEMsWUFFL0NrQyxFQUFlRCxpQkFBaUIsYUFBYSxTQUFBOUQsR0FFeENBLEVBQU1rRSxlQUFpQmxFLEVBQU1rRSxjQUFjRCxRQUFRcEMsVUFBWTdCLEVBQU1nRSxPQUFPQyxRQUFRcEMsU0FDdkY5QyxTQUFTQyxjQUFjLHNDQUFzQ21GLGVBSWhFN0YiLCJmaWxlIjoicGFnZXMvanMvc2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBsb2FkRW1wbG95ZWUsIGRpc3BsYXlFdmVudEluZm9ybWF0aW9uIH0gPSBFbXBsb3llZSgpLFxyXG5cdHsgZ2V0WWVhciB9ID0gQ2FsZW5kYXIoKVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcblx0Y29uc3QgZXZlbnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtdmFjYXRpb24tdGFibGUnKVxyXG5cclxuXHRldmVudENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBldmVudCA9PiB7XHJcblx0XHRpZiAoZXZlbnQudGFyZ2V0LmRhdGFzZXQuZXZlbnRJZCAmJiBldmVudC50YXJnZXQuZGF0YXNldC5ldmVudElkICE9PSBldmVudC5yZWxhdGVkVGFyZ2V0LmRhdGFzZXQuZXZlbnRJZClcclxuXHRcdFx0ZGlzcGxheUV2ZW50SW5mb3JtYXRpb24oZXZlbnQudGFyZ2V0LmRhdGFzZXQuZXZlbnRJZClcclxuXHR9KVxyXG5cdGV2ZW50Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGV2ZW50ID0+IHtcclxuXHRcdC8vZXZlbnQucmVsYXRlZFRhcmdldCDQv9GA0L7QstC10YDQutCwINGH0YLQvtCx0Ysg0L/RgNC4INC00LLQuNC20LXQvdC40Lgg0LjQtyDQutC+0L3RgdC+0LvQuCDQvdC1INCy0YvQu9C10YLQsNC70LAg0L7RiNC40LHQutCwXHJcblx0XHRpZiAoZXZlbnQucmVsYXRlZFRhcmdldCAmJiBldmVudC5yZWxhdGVkVGFyZ2V0LmRhdGFzZXQuZXZlbnRJZCAmJiAhZXZlbnQudGFyZ2V0LmRhdGFzZXQuZXZlbnRJZCkge1xyXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtdmFjYXRpb24tdGFibGUgLmNhbGVuZGFyLWV2ZW50JykucmVtb3ZlKClcclxuXHRcdH1cclxuXHR9KVxyXG59KVxyXG5sb2FkRW1wbG95ZWUoKVxyXG5cclxuZnVuY3Rpb24gRW1wbG95ZWUoKSB7XHJcblx0bGV0IGVtcGxveWVlc0FycmF5ID0gW11cclxuXHJcblx0Y29uc3QgYWRkVG9Db250YWluZXIgPSAoY29udGVudCwgY29udGFpbmVyU2VsZWN0b3IpID0+IHtcclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpXHJcblx0XHRjb250YWluZXIuaW5uZXJIVE1MICs9IGNvbnRlbnRcclxuXHR9XHJcblxyXG5cdGNvbnN0IGRpc3BsYXlFbXBsb3llZXMgPSBlbXBsb3llZXMgPT4ge1xyXG5cdFx0ZW1wbG95ZWVzQXJyYXkgPSBlbXBsb3llZXNcclxuXHRcdGFkZFRvQ29udGFpbmVyKGdldEVtcGxveWVlc0NvbnRlbnQoKSwgJy5qcy12YWNhdGlvbi10YWJsZScpXHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRFbXBsb3llZXNDb250ZW50ID0gKCkgPT5cclxuXHRcdGVtcGxveWVlc0FycmF5Lm1hcChpdGVtID0+IGA8dHI+ICR7Z2V0Q29udGVudE9uZUVtcGxveWVlKGl0ZW0pICsgZ2V0WWVhcihpdGVtLmlkKX0gPC90cj5gKS5qb2luKCcnKVxyXG5cclxuXHRjb25zdCBnZXRDb250ZW50T25lRW1wbG95ZWUgPSBlbXBsb3llZSA9PiB7XHJcblx0XHRsZXQgeyBuYW1lLCBpbWcsIHZhY2F0aW9uRGF5c0NvdW50IH0gPSBlbXBsb3llZVxyXG5cdFx0cmV0dXJuIGA8dGQ+XHJcblx0XHRcdFx0XHQ8aW1nIGNsYXNzPVwidmFjYXRpb25fX2VtcGxveWVlLXBob3RvXCIgc3JjPVwiJHtpbWd9XCIgYWx0PVwiRW1wbG95ZWUgaW1hZ2VcIiAvPlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInZhY2F0aW9uX19lbXBsb3llZS1uYW1lXCI+JHtuYW1lfTwvZGl2PlxyXG5cdFx0XHRcdDwvdGQ+XHJcblx0XHRcdFx0PHRkPiR7dmFjYXRpb25EYXlzQ291bnR9LzI4PC90ZD5gXHJcblx0fVxyXG5cclxuXHRjb25zdCBkaXNwbGF5RW1wbG95ZWVzRXZlbnRzID0gKCkgPT4ge1xyXG5cdFx0ZW1wbG95ZWVzQXJyYXkuZm9yRWFjaChlbXBsb3llZSA9PiBhZGRFdmVudHNUb0NhbGVuZGFyKGVtcGxveWVlKSlcclxuXHR9XHJcblxyXG5cdGNvbnN0IGFkZEV2ZW50c1RvQ2FsZW5kYXIgPSBlbXBsb3llZSA9PiB7XHJcblx0XHRjb25zdCB7IGlkLCBldmVudHMgfSA9IGVtcGxveWVlXHJcblx0XHRldmVudHMuZm9yRWFjaChldmVudCA9PiBhZGRPbmVFdmVudChldmVudCwgaWQpKVxyXG5cdH1cclxuXHJcblx0Y29uc3QgYWRkT25lRXZlbnQgPSAoZXZlbnQsIGVtcGxveWVlSWQpID0+IHtcclxuXHRcdGxldCB7IGlkLCBuYW1lLCBkYXRlU3RhcnQsIGRhdGVFbmQgfSA9IGV2ZW50LFxyXG5cdFx0XHRkYXRlU3RhcnRFdmVudCA9IGRhdGVTdGFydC5zcGxpdCgnLicpLm1hcChwYXJzZUZsb2F0KSxcclxuXHRcdFx0ZGF0ZUVuZEV2ZW50ID0gZGF0ZUVuZC5zcGxpdCgnLicpLm1hcChwYXJzZUZsb2F0KSxcclxuXHRcdFx0c3RhcnREYXkgPSBkYXRlU3RhcnRFdmVudFswXSxcclxuXHRcdFx0c3RhcnRNb250aCA9IGRhdGVTdGFydEV2ZW50WzFdLFxyXG5cdFx0XHRlbmREYXkgPSBkYXRlRW5kRXZlbnRbMF0sXHJcblx0XHRcdGVuZE1vbnRoID0gZGF0ZUVuZEV2ZW50WzFdXHJcblxyXG5cdFx0Y29uc3QgZmluZERheUNvbnRhaW5lciA9IChkYXksIG1vbnRoKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuanMtZGF5LSR7ZGF5fS0ke21vbnRoIC0gMX0tJHtlbXBsb3llZUlkfWApXHJcblxyXG5cdFx0Y29uc3QgYWRkRXZlbnRDbGFzc0FuZEF0dHJpYnV0ZSA9IChkYXlDb250YWluZXIsIG1vbnRoKSA9PiB7XHJcblx0XHRcdGRheUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGBjYWxlbmRhcl9fZGF5LS0ke25hbWV9YClcclxuXHRcdFx0ZGF5Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1ldmVudC1pZCcsIGAke2VtcGxveWVlSWR9LSR7aWR9LSR7bW9udGh9YClcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoc3RhcnRNb250aCA9PT0gZW5kTW9udGgpIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IHN0YXJ0RGF5OyBpIDw9IGVuZERheTsgaSsrKSB7XHJcblx0XHRcdFx0YWRkRXZlbnRDbGFzc0FuZEF0dHJpYnV0ZShmaW5kRGF5Q29udGFpbmVyKGksIHN0YXJ0TW9udGgpLCBzdGFydE1vbnRoIC0gMSlcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IHN0YXJ0RGF5OyBpIDw9IDMxOyBpKyspIHtcclxuXHRcdFx0XHRjb25zdCBkYXlDb250YWluZXIgPSBmaW5kRGF5Q29udGFpbmVyKGksIHN0YXJ0TW9udGgpXHJcblxyXG5cdFx0XHRcdGlmIChkYXlDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdGFkZEV2ZW50Q2xhc3NBbmRBdHRyaWJ1dGUoZGF5Q29udGFpbmVyLCBzdGFydE1vbnRoIC0gMSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gZW5kRGF5OyBpKyspIHtcclxuXHRcdFx0XHRhZGRFdmVudENsYXNzQW5kQXR0cmlidXRlKGZpbmREYXlDb250YWluZXIoaSwgZW5kTW9udGgpLCBlbmRNb250aCAtIDEpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldENhbGVuZGFyRXZlbnRDb250ZW50ID0gKGVtcGxveWVlSW5mb3JtYXRpb24sIGV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuXHRcdGNvbnN0IHsgbmFtZSwgaW1nIH0gPSBlbXBsb3llZUluZm9ybWF0aW9uLFxyXG5cdFx0XHR7IG5hbWU6IGV2ZW50TmFtZSwgZGF0ZVN0YXJ0LCBkYXRlRW5kIH0gPSBldmVudEluZm9ybWF0aW9uXHJcblx0XHRyZXR1cm4gYDxkaXYgY2xhc3M9XCJjYWxlbmRhci1ldmVudFwiPlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19lbXBsb3llZVwiPlxyXG5cdFx0XHRcdFx0XHQ8aW1nIGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX2VtcGxveWVlLXBob3RvXCIgc3JjPVwiJHtpbWd9XCIgYWx0PVwiRW1wbG95ZWUgaW1hZ2VcIj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19lbXBsb3llZS1uYW1lXCI+JHtuYW1lfTwvZGl2PlxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX2luZm9ybWF0aW9uXCI+XHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjYWxlbmRhci1ldmVudF9fZGF0ZSBjYWxlbmRhci1ldmVudF9fZGF0ZS0tJHtldmVudE5hbWV9XCI+XHJcblx0XHRcdFx0XHRcdFx0JHtkYXRlU3RhcnR9LjIwMjAg4oCUwqAke2RhdGVFbmR9LjIwMjAgKDE00LQuKVxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19uYW1lXCI+JHtnZXRFdmVudE5hbWUoZXZlbnROYW1lKX08L2Rpdj5cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdDwvZGl2PmBcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldEV2ZW50TmFtZSA9IG5hbWUgPT4ge1xyXG5cdFx0cmV0dXJuIG5hbWUgPT09ICd2YWNhdGlvbidcclxuXHRcdFx0PyAn0L7RgtC/0YPRgdC6J1xyXG5cdFx0XHQ6IG5hbWUgPT09ICdyZWQnXHJcblx0XHRcdD8gJ9C60YDQsNGB0L3QsNGPINC80LXRgtC60LAnXHJcblx0XHRcdDogbmFtZSA9PT0gJ3llbGxvdydcclxuXHRcdFx0PyAn0LbQtdC70YLQsNGPINC80LXRgtC60LAnXHJcblx0XHRcdDogJydcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRsb2FkRW1wbG95ZWU6ICgpID0+IHtcclxuXHRcdFx0ZmV0Y2goJ2h0dHBzOi8vZHphZHJhbmlrLmdpdGh1Yi5pby9pLWRleC9zcmMvanMvdmFjYXRpb24tY2FsZW5kYXIuanNvbicpXHJcblx0XHRcdFx0LnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG5cdFx0XHRcdC50aGVuKGVtcGxveWVlcyA9PiB7XHJcblx0XHRcdFx0XHRkaXNwbGF5RW1wbG95ZWVzKGVtcGxveWVlcylcclxuXHRcdFx0XHRcdGRpc3BsYXlFbXBsb3llZXNFdmVudHMoKVxyXG5cdFx0XHRcdH0pXHJcblx0XHR9LFxyXG5cdFx0ZGlzcGxheUV2ZW50SW5mb3JtYXRpb246IGV2ZW50SWQgPT4ge1xyXG5cdFx0XHQvL2V2ZW50SWRbZGF5LCBtb250aCwgZW1wbG95ZWVJZF1cclxuXHRcdFx0bGV0IGV2ZW50SWRBcnJheSA9IGV2ZW50SWQuc3BsaXQoJy0nKS5tYXAocGFyc2VGbG9hdCksXHJcblx0XHRcdFx0ZXZlbnREYXkgPSBldmVudElkQXJyYXlbMF0sXHJcblx0XHRcdFx0ZXZlbnRNb250aCA9IGV2ZW50SWRBcnJheVsxXSxcclxuXHRcdFx0XHRldmVudEVtcGxveWVlSWQgPSBldmVudElkQXJyYXlbMl0sXHJcblx0XHRcdFx0ZW1wbG95ZWVJbmZvcm1hdGlvbiA9IGVtcGxveWVlc0FycmF5LmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBldmVudERheSksXHJcblx0XHRcdFx0ZXZlbnRJbmZvcm1hdGlvbiA9IGVtcGxveWVlSW5mb3JtYXRpb24uZXZlbnRzLmZpbmQoZXZlbnQgPT4gZXZlbnQuaWQgPT09IGV2ZW50TW9udGgpXHJcblxyXG5cdFx0XHRhZGRUb0NvbnRhaW5lcihcclxuXHRcdFx0XHRnZXRDYWxlbmRhckV2ZW50Q29udGVudChlbXBsb3llZUluZm9ybWF0aW9uLCBldmVudEluZm9ybWF0aW9uKSxcclxuXHRcdFx0XHRgLmpzLW1vbnRoLSR7ZW1wbG95ZWVJbmZvcm1hdGlvbi5pZH0tJHtldmVudEVtcGxveWVlSWR9YFxyXG5cdFx0XHQpXHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBDYWxlbmRhcigpIHtcclxuXHRsZXQgZGF5c0luTW9udGgsIGZpcnN0RGF5LCBtb250aCwgZW1wbG95ZWVJZCwgZGF5XHJcblx0Ly8gZGF5c0luTW9udGgt0LrQvtC70LjRh9C10YHRgtCy0L4g0LTQvdC10Lkg0LIg0LzQtdGB0Y/RhtC1LFxyXG5cdC8vIGZpcnN0RGF5LdC00LXQvdGMINC90LXQtNC10LvQuCDQv9C10YDQstC+0LPQviDQtNC90Y8sXHJcblx0Ly8gbW9udGgt0LjQvdC00LXQutGBINC80LXRgdGP0YbQsCxcclxuXHQvLyBlbXBsb3llZUlkLSBpZCDRgdC+0YLRgNGD0LTQvdC40LrQsCDQtNC70Y8g0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIGpzLW1vbnRoLSoqINC60LvQsNGB0YHQsCxcclxuXHQvLyBkYXktINGB0YfQtdGC0YfQuNC6INC00L3QtdC5XHJcblxyXG5cdGNvbnN0IHNldEVtcGxveWVlSWQgPSBpZCA9PiB7XHJcblx0XHRyZXR1cm4gKGVtcGxveWVlSWQgPSBpZClcclxuXHR9XHJcblxyXG5cdGNvbnN0IHNldE1vbnRoSW5mb3JtYXRpb24gPSBtb250aEluZGV4ID0+IHtcclxuXHRcdG1vbnRoID0gbW9udGhJbmRleFxyXG5cdFx0ZGF5c0luTW9udGggPSBuZXcgRGF0ZSgyMDIwLCBtb250aEluZGV4ICsgMSwgMCkuZ2V0RGF0ZSgpXHJcblx0XHRsZXQgZnJEID0gbmV3IERhdGUoMjAyMCwgbW9udGhJbmRleCwgMSkuZ2V0RGF5KClcclxuXHRcdGZyRCA9PT0gMCA/IChmaXJzdERheSA9IDYpIDogKGZpcnN0RGF5ID0gZnJEIC0gMSkgLy/RgdC00LXQu9Cw0YLRjCDQvtGC0YHRh9C10YIg0LTQvdC10Lkg0L3QtdC00LXQu9C4INGBINC/0L7QvdC10LTQtdC70YzQvdC40LrQsFxyXG5cdH1cclxuXHJcblx0Y29uc3QgZ2V0WWVhckNvbnRlbnQgPSAoaSA9IDAsIGNvbnRlbnQgPSAnJykgPT4ge1xyXG5cdFx0aWYgKGkgPCAxMikge1xyXG5cdFx0XHRjb250ZW50ICs9IGdldE9uZU1vbnRoKGkpXHJcblx0XHRcdHJldHVybiBnZXRZZWFyQ29udGVudChpICsgMSwgY29udGVudClcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBjb250ZW50XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRPbmVNb250aCA9IG0gPT4ge1xyXG5cdFx0ZGF5ID0gMVxyXG5cdFx0c2V0TW9udGhJbmZvcm1hdGlvbihtKVxyXG5cdFx0Ly9qcy1tb250aC17ZW1wbG95ZWVJZH0te21vbnRofSDRhNC+0YDQvNC40YDRg9C10YLRgdGPINC60LvQsNGB0YEg0LTQu9GPINC/0L7QuNGB0LrQsCDQtNC90Y8gPT4g0L7RgtC+0LHRgNCw0LfQuNGC0YwgZXZlbnRcclxuXHRcdHJldHVybiBgPHRkPlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyX19tb250aCBqcy1tb250aC0ke2VtcGxveWVlSWR9LSR7bX1cIj4gXHJcblx0XHRcdFx0XHRcdCR7Z2V0V2Vla3MoKX1cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdDwvdGQ+YFxyXG5cdH1cclxuXHJcblx0Y29uc3QgZ2V0V2Vla3MgPSAoaSA9IDAsIGNvbnRlbnQgPSAnJykgPT4ge1xyXG5cdFx0aWYgKGRheSA8PSBkYXlzSW5Nb250aCkge1xyXG5cdFx0XHRjb250ZW50ICs9IGdldE9uZVdlZWsoKVxyXG5cdFx0XHRyZXR1cm4gZ2V0V2Vla3MoaSArIDEsIGNvbnRlbnQpXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gY29udGVudFxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y29uc3QgZ2V0T25lV2VlayA9ICgpID0+IHtcclxuXHRcdHJldHVybiBgPGRpdiBjbGFzcz1cImNhbGVuZGFyX193ZWVrXCI+XHJcblx0XHRcdFx0XHQke2dldERheXMoKX1cclxuXHRcdFx0XHQ8L2Rpdj5gXHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXREYXlzID0gKGkgPSAwLCBkYXlzQ29udGVudCA9ICcnKSA9PiB7XHJcblx0XHRpZiAoaSA8IDcpIHtcclxuXHRcdFx0aWYgKChmaXJzdERheSA+IDAgJiYgZGF5IDwgNykgfHwgZGF5ID4gZGF5c0luTW9udGgpIHtcclxuXHRcdFx0XHRkYXlzQ29udGVudCArPSBnZXRPbmVEYXkoJ2NhbGVuZGFyX19lbXB0eScpXHJcblx0XHRcdFx0Zmlyc3REYXktLVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGRheXNDb250ZW50ICs9IGdldE9uZURheSgnY2FsZW5kYXJfX2RheScpXHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGdldERheXMoaSArIDEsIGRheXNDb250ZW50KVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGRheXNDb250ZW50XHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRPbmVEYXkgPSBkYXlDbGFzcyA9PiB7XHJcblx0XHRsZXQgaXNFbXB0eURheSA9IGRheUNsYXNzID09PSAnY2FsZW5kYXJfX2VtcHR5J1xyXG5cdFx0IWlzRW1wdHlEYXkgPyBkYXkrKyA6ICcnXHJcblx0XHQvL9GH0YLQvtCx0Ysg0L3QtSDQstCy0L7QtNC40YLRjCDQu9C40YjQvdGO0Y4g0L/QtdGA0LXQvNC10L3QvdGD0Y4g0YHQvdCw0YfQsNC70LAg0L/RgNC40LHQsNCy0LjRgtGMINC00LXQvdGMLCDQsCDQsiDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Lgg0LrQu9Cw0YHRgdCwINC10LPQviDQstGL0YfQtdGB0YLRjFxyXG5cdFx0cmV0dXJuIGA8ZGl2IGNsYXNzPVwiJHtkYXlDbGFzc30gJHshaXNFbXB0eURheSA/IGBqcy1kYXktJHtkYXkgLSAxfS0ke21vbnRofS0ke2VtcGxveWVlSWR9YCA6IGBgfVwiID48L2Rpdj5gXHJcblx0fVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0Z2V0WWVhcjogaWQgPT4ge1xyXG5cdFx0XHRzZXRFbXBsb3llZUlkKGlkKVxyXG5cdFx0XHRyZXR1cm4gZ2V0WWVhckNvbnRlbnQoKVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iXX0=
