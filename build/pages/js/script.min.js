"use strict";function Employee(){var t=[],n=function(t,n){document.querySelector(n).innerHTML+=t},e=function(){return t.map((function(t){return"<tr> ".concat(a(t)+calendar.getYear(t.id)," </tr>")})).join("")},a=function(t){var n=t.name,e=t.img,a=t.vacationDaysCount;return'<td>\n\t\t\t\t\t<img class="vacation__employee-photo" src="'.concat(e,'" alt="Employee image" />\n\t\t\t\t\t<div class="vacation__employee-name">').concat(n,"</div>\n\t\t\t\t</td>\n\t\t\t\t<td>").concat(a,"/28</td>")},c=function(t){var n=t.id;t.events.forEach((function(t){return o(t,n)}))},o=function(t,n){var e=t.id,a=t.name,c=t.dateStart,o=t.dateEnd,r=c.split(".").map(parseFloat),d=o.split(".").map(parseFloat),i=r[0],l=r[1],v=d[0],s=d[1],u=function(t,e){return document.querySelector(".js-day-".concat(t,"-").concat(e-1,"-").concat(n))},m=function(t,c){t.classList.add("calendar__day--".concat(a)),t.setAttribute("data-event-id","".concat(n,"-").concat(e,"-").concat(c))};if(l===s)for(var f=i;f<=v;f++)m(u(f,l),l-1);else{for(var _=i;_<=31;_++){var p=u(_,l);p&&m(p,l-1)}for(var y=1;y<=v;y++)m(u(y,s),s-1)}},r=function(t){return"vacation"===t?"отпуск":"red"===t?"красная метка":"yellow"===t?"желтая метка":""};return{loadEmployee:function(){fetch("https://dzadranik.github.io/i-dex/src/json/vacation-calendar.json").then((function(t){return t.json()})).then((function(a){!function(a){t=a,n(e(),".js-vacation-table")}(a),t.forEach((function(t){return c(t)}))}))},displayEventInformation:function(e){var a=e.split("-").map(parseFloat),c=a[0],o=a[1],d=a[2],i=t.find((function(t){return t.id===c})),l=i.events.find((function(t){return t.id===o}));n(function(t,n){var e=t.name,a=t.img,c=n.name,o=n.dateStart,d=n.dateEnd;return'<div class="calendar-event">\n\t\t\t\t\t<div class="calendar-event__employee">\n\t\t\t\t\t\t<img class="calendar-event__employee-photo" src="'.concat(a,'" alt="Employee image">\n\t\t\t\t\t\t<div class="calendar-event__employee-name">').concat(e,'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="calendar-event__information">\n\t\t\t\t\t\t<div class="calendar-event__date calendar-event__date--').concat(c,'">\n\t\t\t\t\t\t\t').concat(o,".2020 — ").concat(d,'.2020 (14д.)\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="calendar-event__name">').concat(r(c),"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}(i,l),".js-month-".concat(i.id,"-").concat(d))}}}function Calendar(){var t,n,e,a,c,o,r,d=function(d){return c=1,function(a){var c=new Date;o=c.getDate(),r=c.getMonth(),e=a,t=new Date(2020,a+1,0).getDate();var d=new Date(2020,a,1).getDay();n=0===d?6:d-1}(d),'<td>\n\t\t\t\t\t<div class="calendar__month js-month-'.concat(a,"-").concat(d,'"> \n\t\t\t\t\t\t').concat(i(),"\n\t\t\t\t\t</div>\n\t\t\t\t</td>")},i=function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c<=t?n(e+1,a+=l()):a},l=function(){return'<div class="calendar__week">\n\t\t\t\t\t'.concat(v(),"\n\t\t\t\t</div>")},v=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a<7?(n>0&&c<7||c>t?(o+=s("calendar__empty"),n--):o+=s("calendar__day"),e(a+1,o)):o},s=function(t){var n="calendar__empty"===t,d=!(r<e)&&(r!==e||c<o);return!n&&c++,'<div class="'.concat(t," ").concat(n?"":"js-day-".concat(c-1,"-").concat(e,"-").concat(a)," ").concat(d&&!n?"calendar__day--last":"",'" ></div>')};return{getYear:function(t){return function(t){a=t}(t),function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n<12?t(n+1,e+=d(n)):e}()}}}var employee=new Employee,calendar=new Calendar;window.addEventListener("load",(function(){document.querySelector(".js-vacation-table").addEventListener("mouseover",(function(t){t.target.dataset.eventId&&t.target.dataset.eventId!==t.relatedTarget.dataset.eventId&&employee.displayEventInformation(t.target.dataset.eventId),t.relatedTarget&&t.relatedTarget.dataset.eventId&&!t.target.dataset.eventId&&document.querySelector(".js-vacation-table .calendar-event").remove()}))})),employee.loadEmployee();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhZ2VzL2pzL3NjcmlwdC5qcyJdLCJuYW1lcyI6WyJFbXBsb3llZSIsImVtcGxveWVlc0FycmF5IiwiYWRkVG9Db250YWluZXIiLCJjb250ZW50IiwiY29udGFpbmVyU2VsZWN0b3IiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbm5lckhUTUwiLCJnZXRFbXBsb3llZXNDb250ZW50IiwibWFwIiwiaXRlbSIsImNvbmNhdCIsImdldENvbnRlbnRPbmVFbXBsb3llZSIsImNhbGVuZGFyIiwiZ2V0WWVhciIsImlkIiwiam9pbiIsImVtcGxveWVlIiwibmFtZSIsImltZyIsInZhY2F0aW9uRGF5c0NvdW50IiwiYWRkRXZlbnRzVG9DYWxlbmRhciIsImV2ZW50cyIsImZvckVhY2giLCJldmVudCIsImFkZE9uZUV2ZW50IiwiZW1wbG95ZWVJZCIsImRhdGVTdGFydCIsImRhdGVFbmQiLCJkYXRlU3RhcnRFdmVudCIsInNwbGl0IiwicGFyc2VGbG9hdCIsImRhdGVFbmRFdmVudCIsInN0YXJ0RGF5Iiwic3RhcnRNb250aCIsImVuZERheSIsImVuZE1vbnRoIiwiZmluZERheUNvbnRhaW5lciIsImRheSIsIm1vbnRoIiwiYWRkRXZlbnRDbGFzc0FuZEF0dHJpYnV0ZSIsImRheUNvbnRhaW5lciIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImkiLCJnZXRFdmVudE5hbWUiLCJsb2FkRW1wbG95ZWUiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJlbXBsb3llZXMiLCJkaXNwbGF5RW1wbG95ZWVzIiwiZGlzcGxheUV2ZW50SW5mb3JtYXRpb24iLCJldmVudElkIiwiZXZlbnRJZEFycmF5IiwiZXZlbnREYXkiLCJldmVudE1vbnRoIiwiZXZlbnRFbXBsb3llZUlkIiwiZW1wbG95ZWVJbmZvcm1hdGlvbiIsImZpbmQiLCJldmVudEluZm9ybWF0aW9uIiwiZXZlbnROYW1lIiwiZ2V0Q2FsZW5kYXJFdmVudENvbnRlbnQiLCJDYWxlbmRhciIsImRheXNJbk1vbnRoIiwiZmlyc3REYXkiLCJ0b2RheSIsInRvZGF5TW9udGgiLCJnZXRPbmVNb250aCIsIm0iLCJtb250aEluZGV4IiwidG9kYXlEYXRlIiwiRGF0ZSIsImdldERhdGUiLCJnZXRNb250aCIsImZyRCIsImdldERheSIsInNldE1vbnRoSW5mb3JtYXRpb24iLCJnZXRXZWVrcyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImdldE9uZVdlZWsiLCJnZXREYXlzIiwiZGF5c0NvbnRlbnQiLCJnZXRPbmVEYXkiLCJkYXlDbGFzcyIsImlzRW1wdHlEYXkiLCJpc0xhc3REYXkiLCJzZXRFbXBsb3llZUlkIiwiZ2V0WWVhckNvbnRlbnQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiZGF0YXNldCIsInJlbGF0ZWRUYXJnZXQiLCJyZW1vdmUiXSwibWFwcGluZ3MiOiJBQUFBLGFBQUEsU0FBU0EsV0FDUixJQUFJQyxFQUFpQixHQUVmQyxFQUFpQixTQUFDQyxFQUFTQyxHQUNkQyxTQUFTQyxjQUFjRixHQUMvQkcsV0FBYUosR0FRbEJLLEVBQXNCLFdBQUEsT0FDM0JQLEVBQWVRLEtBQUksU0FBQUMsR0FBSSxNQUFBLFFBQUFDLE9BQVlDLEVBQXNCRixHQUFRRyxTQUFTQyxRQUFRSixFQUFLSyxJQUFoRSxhQUE2RUMsS0FBSyxLQUVwR0osRUFBd0IsU0FBQUssR0FBWSxJQUNuQ0MsRUFBaUNELEVBQWpDQyxLQUFNQyxFQUEyQkYsRUFBM0JFLElBQUtDLEVBQXNCSCxFQUF0Qkcsa0JBQ2pCLE1BQUEsOERBQUFULE9BQ2dEUSxFQURoRCw4RUFBQVIsT0FFMENPLEVBRjFDLHVDQUFBUCxPQUlRUyxFQUpSLGFBV0tDLEVBQXNCLFNBQUFKLEdBQVksSUFDL0JGLEVBQWVFLEVBQWZGLEdBQWVFLEVBQVhLLE9BQ0xDLFNBQVEsU0FBQUMsR0FBSyxPQUFJQyxFQUFZRCxFQUFPVCxPQUd0Q1UsRUFBYyxTQUFDRCxFQUFPRSxHQUFlLElBQ3BDWCxFQUFpQ1Ms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RUFBRCxHQUFBLFVBQUE5RSxPQUF3QjJCLEVBQU0sRUFBOUIsS0FBQTNCLE9BQW1DNEIsRUFBbkMsS0FBQTVCLE9BQTRDZSxHQUE5RSxLQUFBZixPQUNDK0UsSUFBY0QsRUFBYSxzQkFBd0IsR0FEcEQsY0FLRCxNQUFPLENBQ04zRSxRQUFTLFNBQUFDLEdBRVIsT0FyRm9CLFNBQUFBLEdBQ2JXLEVBQWFYLEVBbUZwQjRFLENBQWM1RSxHQXRFTyxTQUFqQjZFLElBQTBDLElBQXhCL0MsRUFBd0JvQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFwQixFQUFHOUUsRUFBaUI4RSxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFQLEdBQ3hDLE9BQUlwQyxFQUFJLEdBRUErQyxFQUFlL0MsRUFBSSxFQUQxQjFDLEdBQVdtRSxFQUFZekIsSUFHaEIxQyxFQWtFQXlGLEtBS1YsSUFBTTNFLFNBQVcsSUFBSWpCLFNBQ3BCYSxTQUFXLElBQUlvRCxTQUVoQjRCLE9BQU9DLGlCQUFpQixRQUFRLFdBQ1J6RixTQUFTQyxjQUFjLHNCQUUvQndGLGlCQUFpQixhQUFhLFNBQUF0RSxHQUN4Q0EsRUFBTXVFLE9BQU9DLFFBQVF6QyxTQUFXL0IsRUFBTXVFLE9BQU9DLFFBQVF6QyxVQUFZL0IsRUFBTXlFLGNBQWNELFFBQVF6QyxTQUNoR3RDLFNBQVNxQyx3QkFBd0I5QixFQUFNdUUsT0FBT0MsUUFBUXpDLFNBRW5EL0IsRUFBTXlFLGVBQWlCekUsRUFBTXlFLGNBQWNELFFBQVF6QyxVQUFZL0IsRUFBTXVFLE9BQU9DLFFBQVF6QyxTQUN2RmxELFNBQVNDLGNBQWMsc0NBQXNDNEYsZUFJaEVqRixTQUFTOEIiLCJmaWxlIjoicGFnZXMvanMvc2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gRW1wbG95ZWUoKSB7XHJcblx0bGV0IGVtcGxveWVlc0FycmF5ID0gW11cclxuXHJcblx0Y29uc3QgYWRkVG9Db250YWluZXIgPSAoY29udGVudCwgY29udGFpbmVyU2VsZWN0b3IpID0+IHtcclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpXHJcblx0XHRjb250YWluZXIuaW5uZXJIVE1MICs9IGNvbnRlbnRcclxuXHR9XHJcblxyXG5cdGNvbnN0IGRpc3BsYXlFbXBsb3llZXMgPSBlbXBsb3llZXMgPT4ge1xyXG5cdFx0ZW1wbG95ZWVzQXJyYXkgPSBlbXBsb3llZXNcclxuXHRcdGFkZFRvQ29udGFpbmVyKGdldEVtcGxveWVlc0NvbnRlbnQoKSwgJy5qcy12YWNhdGlvbi10YWJsZScpXHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRFbXBsb3llZXNDb250ZW50ID0gKCkgPT5cclxuXHRcdGVtcGxveWVlc0FycmF5Lm1hcChpdGVtID0+IGA8dHI+ICR7Z2V0Q29udGVudE9uZUVtcGxveWVlKGl0ZW0pICsgY2FsZW5kYXIuZ2V0WWVhcihpdGVtLmlkKX0gPC90cj5gKS5qb2luKCcnKVxyXG5cclxuXHRjb25zdCBnZXRDb250ZW50T25lRW1wbG95ZWUgPSBlbXBsb3llZSA9PiB7XHJcblx0XHRsZXQgeyBuYW1lLCBpbWcsIHZhY2F0aW9uRGF5c0NvdW50IH0gPSBlbXBsb3llZVxyXG5cdFx0cmV0dXJuIGA8dGQ+XHJcblx0XHRcdFx0XHQ8aW1nIGNsYXNzPVwidmFjYXRpb25fX2VtcGxveWVlLXBob3RvXCIgc3JjPVwiJHtpbWd9XCIgYWx0PVwiRW1wbG95ZWUgaW1hZ2VcIiAvPlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInZhY2F0aW9uX19lbXBsb3llZS1uYW1lXCI+JHtuYW1lfTwvZGl2PlxyXG5cdFx0XHRcdDwvdGQ+XHJcblx0XHRcdFx0PHRkPiR7dmFjYXRpb25EYXlzQ291bnR9LzI4PC90ZD5gXHJcblx0fVxyXG5cclxuXHRjb25zdCBkaXNwbGF5RW1wbG95ZWVzRXZlbnRzID0gKCkgPT4ge1xyXG5cdFx0ZW1wbG95ZWVzQXJyYXkuZm9yRWFjaChlbXBsb3llZSA9PiBhZGRFdmVudHNUb0NhbGVuZGFyKGVtcGxveWVlKSlcclxuXHR9XHJcblxyXG5cdGNvbnN0IGFkZEV2ZW50c1RvQ2FsZW5kYXIgPSBlbXBsb3llZSA9PiB7XHJcblx0XHRjb25zdCB7IGlkLCBldmVudHMgfSA9IGVtcGxveWVlXHJcblx0XHRldmVudHMuZm9yRWFjaChldmVudCA9PiBhZGRPbmVFdmVudChldmVudCwgaWQpKVxyXG5cdH1cclxuXHJcblx0Y29uc3QgYWRkT25lRXZlbnQgPSAoZXZlbnQsIGVtcGxveWVlSWQpID0+IHtcclxuXHRcdGxldCB7IGlkLCBuYW1lLCBkYXRlU3RhcnQsIGRhdGVFbmQgfSA9IGV2ZW50LFxyXG5cdFx0XHRkYXRlU3RhcnRFdmVudCA9IGRhdGVTdGFydC5zcGxpdCgnLicpLm1hcChwYXJzZUZsb2F0KSxcclxuXHRcdFx0ZGF0ZUVuZEV2ZW50ID0gZGF0ZUVuZC5zcGxpdCgnLicpLm1hcChwYXJzZUZsb2F0KSxcclxuXHRcdFx0c3RhcnREYXkgPSBkYXRlU3RhcnRFdmVudFswXSxcclxuXHRcdFx0c3RhcnRNb250aCA9IGRhdGVTdGFydEV2ZW50WzFdLFxyXG5cdFx0XHRlbmREYXkgPSBkYXRlRW5kRXZlbnRbMF0sXHJcblx0XHRcdGVuZE1vbnRoID0gZGF0ZUVuZEV2ZW50WzFdXHJcblxyXG5cdFx0Y29uc3QgZmluZERheUNvbnRhaW5lciA9IChkYXksIG1vbnRoKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuanMtZGF5LSR7ZGF5fS0ke21vbnRoIC0gMX0tJHtlbXBsb3llZUlkfWApXHJcblxyXG5cdFx0Y29uc3QgYWRkRXZlbnRDbGFzc0FuZEF0dHJpYnV0ZSA9IChkYXlDb250YWluZXIsIG1vbnRoKSA9PiB7XHJcblx0XHRcdGRheUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGBjYWxlbmRhcl9fZGF5LS0ke25hbWV9YClcclxuXHRcdFx0ZGF5Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1ldmVudC1pZCcsIGAke2VtcGxveWVlSWR9LSR7aWR9LSR7bW9udGh9YClcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoc3RhcnRNb250aCA9PT0gZW5kTW9udGgpIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IHN0YXJ0RGF5OyBpIDw9IGVuZERheTsgaSsrKSB7XHJcblx0XHRcdFx0YWRkRXZlbnRDbGFzc0FuZEF0dHJpYnV0ZShmaW5kRGF5Q29udGFpbmVyKGksIHN0YXJ0TW9udGgpLCBzdGFydE1vbnRoIC0gMSlcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IHN0YXJ0RGF5OyBpIDw9IDMxOyBpKyspIHtcclxuXHRcdFx0XHRjb25zdCBkYXlDb250YWluZXIgPSBmaW5kRGF5Q29udGFpbmVyKGksIHN0YXJ0TW9udGgpXHJcblxyXG5cdFx0XHRcdGlmIChkYXlDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdGFkZEV2ZW50Q2xhc3NBbmRBdHRyaWJ1dGUoZGF5Q29udGFpbmVyLCBzdGFydE1vbnRoIC0gMSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gZW5kRGF5OyBpKyspIHtcclxuXHRcdFx0XHRhZGRFdmVudENsYXNzQW5kQXR0cmlidXRlKGZpbmREYXlDb250YWluZXIoaSwgZW5kTW9udGgpLCBlbmRNb250aCAtIDEpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldENhbGVuZGFyRXZlbnRDb250ZW50ID0gKGVtcGxveWVlSW5mb3JtYXRpb24sIGV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuXHRcdGNvbnN0IHsgbmFtZSwgaW1nIH0gPSBlbXBsb3llZUluZm9ybWF0aW9uLFxyXG5cdFx0XHR7IG5hbWU6IGV2ZW50TmFtZSwgZGF0ZVN0YXJ0LCBkYXRlRW5kIH0gPSBldmVudEluZm9ybWF0aW9uXHJcblx0XHRyZXR1cm4gYDxkaXYgY2xhc3M9XCJjYWxlbmRhci1ldmVudFwiPlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19lbXBsb3llZVwiPlxyXG5cdFx0XHRcdFx0XHQ8aW1nIGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX2VtcGxveWVlLXBob3RvXCIgc3JjPVwiJHtpbWd9XCIgYWx0PVwiRW1wbG95ZWUgaW1hZ2VcIj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19lbXBsb3llZS1uYW1lXCI+JHtuYW1lfTwvZGl2PlxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX2luZm9ybWF0aW9uXCI+XHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjYWxlbmRhci1ldmVudF9fZGF0ZSBjYWxlbmRhci1ldmVudF9fZGF0ZS0tJHtldmVudE5hbWV9XCI+XHJcblx0XHRcdFx0XHRcdFx0JHtkYXRlU3RhcnR9LjIwMjAg4oCUwqAke2RhdGVFbmR9LjIwMjAgKDE00LQuKVxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19uYW1lXCI+JHtnZXRFdmVudE5hbWUoZXZlbnROYW1lKX08L2Rpdj5cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdDwvZGl2PmBcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldEV2ZW50TmFtZSA9IG5hbWUgPT4ge1xyXG5cdFx0cmV0dXJuIG5hbWUgPT09ICd2YWNhdGlvbidcclxuXHRcdFx0PyAn0L7RgtC/0YPRgdC6J1xyXG5cdFx0XHQ6IG5hbWUgPT09ICdyZWQnXHJcblx0XHRcdD8gJ9C60YDQsNGB0L3QsNGPINC80LXRgtC60LAnXHJcblx0XHRcdDogbmFtZSA9PT0gJ3llbGxvdydcclxuXHRcdFx0PyAn0LbQtdC70YLQsNGPINC80LXRgtC60LAnXHJcblx0XHRcdDogJydcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRsb2FkRW1wbG95ZWU6ICgpID0+IHtcclxuXHRcdFx0ZmV0Y2goJ2h0dHBzOi8vZHphZHJhbmlrLmdpdGh1Yi5pby9pLWRleC9zcmMvanNvbi92YWNhdGlvbi1jYWxlbmRhci5qc29uJylcclxuXHRcdFx0XHQudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcblx0XHRcdFx0LnRoZW4oZW1wbG95ZWVzID0+IHtcclxuXHRcdFx0XHRcdGRpc3BsYXlFbXBsb3llZXMoZW1wbG95ZWVzKVxyXG5cdFx0XHRcdFx0ZGlzcGxheUVtcGxveWVlc0V2ZW50cygpXHJcblx0XHRcdFx0fSlcclxuXHRcdH0sXHJcblx0XHRkaXNwbGF5RXZlbnRJbmZvcm1hdGlvbjogZXZlbnRJZCA9PiB7XHJcblx0XHRcdC8vZXZlbnRJZFtkYXksIG1vbnRoLCBlbXBsb3llZUlkXVxyXG5cdFx0XHRsZXQgZXZlbnRJZEFycmF5ID0gZXZlbnRJZC5zcGxpdCgnLScpLm1hcChwYXJzZUZsb2F0KSxcclxuXHRcdFx0XHRldmVudERheSA9IGV2ZW50SWRBcnJheVswXSxcclxuXHRcdFx0XHRldmVudE1vbnRoID0gZXZlbnRJZEFycmF5WzFdLFxyXG5cdFx0XHRcdGV2ZW50RW1wbG95ZWVJZCA9IGV2ZW50SWRBcnJheVsyXSxcclxuXHRcdFx0XHRlbXBsb3llZUluZm9ybWF0aW9uID0gZW1wbG95ZWVzQXJyYXkuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IGV2ZW50RGF5KSxcclxuXHRcdFx0XHRldmVudEluZm9ybWF0aW9uID0gZW1wbG95ZWVJbmZvcm1hdGlvbi5ldmVudHMuZmluZChldmVudCA9PiBldmVudC5pZCA9PT0gZXZlbnRNb250aClcclxuXHJcblx0XHRcdGFkZFRvQ29udGFpbmVyKFxyXG5cdFx0XHRcdGdldENhbGVuZGFyRXZlbnRDb250ZW50KGVtcGxveWVlSW5mb3JtYXRpb24sIGV2ZW50SW5mb3JtYXRpb24pLFxyXG5cdFx0XHRcdGAuanMtbW9udGgtJHtlbXBsb3llZUluZm9ybWF0aW9uLmlkfS0ke2V2ZW50RW1wbG95ZWVJZH1gXHJcblx0XHRcdClcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIENhbGVuZGFyKCkge1xyXG5cdGxldCBkYXlzSW5Nb250aCwgZmlyc3REYXksIG1vbnRoLCBlbXBsb3llZUlkLCBkYXksIHRvZGF5LCB0b2RheU1vbnRoXHJcblx0Ly8gZGF5c0luTW9udGgt0LrQvtC70LjRh9C10YHRgtCy0L4g0LTQvdC10Lkg0LIg0LzQtdGB0Y/RhtC1LFxyXG5cdC8vIGZpcnN0RGF5LdC00LXQvdGMINC90LXQtNC10LvQuCDQv9C10YDQstC+0LPQviDQtNC90Y8sXHJcblx0Ly8gbW9udGgt0LjQvdC00LXQutGBINC80LXRgdGP0YbQsCxcclxuXHQvLyBlbXBsb3llZUlkLSBpZCDRgdC+0YLRgNGD0LTQvdC40LrQsCDQtNC70Y8g0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIGpzLW1vbnRoLSoqINC60LvQsNGB0YHQsCxcclxuXHQvLyBkYXktINGB0YfQtdGC0YfQuNC6INC00L3QtdC5XHJcblxyXG5cdGNvbnN0IHNldEVtcGxveWVlSWQgPSBpZCA9PiB7XHJcblx0XHRyZXR1cm4gKGVtcGxveWVlSWQgPSBpZClcclxuXHR9XHJcblxyXG5cdGNvbnN0IHNldE1vbnRoSW5mb3JtYXRpb24gPSBtb250aEluZGV4ID0+IHtcclxuXHRcdGxldCB0b2RheURhdGUgPSBuZXcgRGF0ZSgpXHJcblx0XHR0b2RheSA9IHRvZGF5RGF0ZS5nZXREYXRlKClcclxuXHRcdHRvZGF5TW9udGggPSB0b2RheURhdGUuZ2V0TW9udGgoKVxyXG5cdFx0bW9udGggPSBtb250aEluZGV4XHJcblx0XHRkYXlzSW5Nb250aCA9IG5ldyBEYXRlKDIwMjAsIG1vbnRoSW5kZXggKyAxLCAwKS5nZXREYXRlKClcclxuXHRcdGxldCBmckQgPSBuZXcgRGF0ZSgyMDIwLCBtb250aEluZGV4LCAxKS5nZXREYXkoKVxyXG5cdFx0ZnJEID09PSAwID8gKGZpcnN0RGF5ID0gNikgOiAoZmlyc3REYXkgPSBmckQgLSAxKSAvL9GB0LTQtdC70LDRgtGMINC+0YLRgdGH0LXRgiDQtNC90LXQuSDQvdC10LTQtdC70Lgg0YEg0L/QvtC90LXQtNC10LvRjNC90LjQutCwXHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRZZWFyQ29udGVudCA9IChpID0gMCwgY29udGVudCA9ICcnKSA9PiB7XHJcblx0XHRpZiAoaSA8IDEyKSB7XHJcblx0XHRcdGNvbnRlbnQgKz0gZ2V0T25lTW9udGgoaSlcclxuXHRcdFx0cmV0dXJuIGdldFllYXJDb250ZW50KGkgKyAxLCBjb250ZW50KVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIGNvbnRlbnRcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldE9uZU1vbnRoID0gbSA9PiB7XHJcblx0XHRkYXkgPSAxXHJcblx0XHRzZXRNb250aEluZm9ybWF0aW9uKG0pXHJcblx0XHQvL2pzLW1vbnRoLXtlbXBsb3llZUlkfS17bW9udGh9INGE0L7RgNC80LjRgNGD0LXRgtGB0Y8g0LrQu9Cw0YHRgSDQtNC70Y8g0L/QvtC40YHQutCwINC00L3RjyA9PiDQvtGC0L7QsdGA0LDQt9C40YLRjCBldmVudFxyXG5cdFx0cmV0dXJuIGA8dGQ+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY2FsZW5kYXJfX21vbnRoIGpzLW1vbnRoLSR7ZW1wbG95ZWVJZH0tJHttfVwiPiBcclxuXHRcdFx0XHRcdFx0JHtnZXRXZWVrcygpfVxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0PC90ZD5gXHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRXZWVrcyA9IChpID0gMCwgY29udGVudCA9ICcnKSA9PiB7XHJcblx0XHRpZiAoZGF5IDw9IGRheXNJbk1vbnRoKSB7XHJcblx0XHRcdGNvbnRlbnQgKz0gZ2V0T25lV2VlaygpXHJcblx0XHRcdHJldHVybiBnZXRXZWVrcyhpICsgMSwgY29udGVudClcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBjb250ZW50XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRPbmVXZWVrID0gKCkgPT4ge1xyXG5cdFx0cmV0dXJuIGA8ZGl2IGNsYXNzPVwiY2FsZW5kYXJfX3dlZWtcIj5cclxuXHRcdFx0XHRcdCR7Z2V0RGF5cygpfVxyXG5cdFx0XHRcdDwvZGl2PmBcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldERheXMgPSAoaSA9IDAsIGRheXNDb250ZW50ID0gJycpID0+IHtcclxuXHRcdGlmIChpIDwgNykge1xyXG5cdFx0XHRpZiAoKGZpcnN0RGF5ID4gMCAmJiBkYXkgPCA3KSB8fCBkYXkgPiBkYXlzSW5Nb250aCkge1xyXG5cdFx0XHRcdGRheXNDb250ZW50ICs9IGdldE9uZURheSgnY2FsZW5kYXJfX2VtcHR5JylcclxuXHRcdFx0XHRmaXJzdERheS0tXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZGF5c0NvbnRlbnQgKz0gZ2V0T25lRGF5KCdjYWxlbmRhcl9fZGF5JylcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZ2V0RGF5cyhpICsgMSwgZGF5c0NvbnRlbnQpXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZGF5c0NvbnRlbnRcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldElzTGFzdERheSA9ICgpID0+IHtcclxuXHRcdGlmICh0b2RheU1vbnRoIDwgbW9udGgpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlXHJcblx0XHR9XHJcblx0XHRpZiAodG9kYXlNb250aCA9PT0gbW9udGgpIHtcclxuXHRcdFx0cmV0dXJuIGRheSA8IHRvZGF5XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdHJ1ZVxyXG5cdH1cclxuXHJcblx0Y29uc3QgZ2V0T25lRGF5ID0gZGF5Q2xhc3MgPT4ge1xyXG5cdFx0bGV0IGlzRW1wdHlEYXkgPSBkYXlDbGFzcyA9PT0gJ2NhbGVuZGFyX19lbXB0eScsXHJcblx0XHRcdGlzTGFzdERheSA9IGdldElzTGFzdERheSgpXHJcblx0XHQhaXNFbXB0eURheSA/IGRheSsrIDogJydcclxuXHRcdC8v0YfRgtC+0LHRiyDQvdC1INCy0LLQvtC00LjRgtGMINC70LjRiNC90Y7RjiDQv9C10YDQtdC80LXQvdC90YPRjiDRgdC90LDRh9Cw0LvQsCDQv9GA0LjQsdCw0LLQuNGC0Ywg0LTQtdC90YwsINCwINCyINGE0L7RgNC80LjRgNC+0LLQsNC90LjQuCDQutC70LDRgdGB0LAg0LXQs9C+INCy0YvRh9C10YHRgtGMXHJcblx0XHRyZXR1cm4gYDxkaXYgY2xhc3M9XCIke2RheUNsYXNzfSAkeyFpc0VtcHR5RGF5ID8gYGpzLWRheS0ke2RheSAtIDF9LSR7bW9udGh9LSR7ZW1wbG95ZWVJZH1gIDogYGB9ICR7XHJcblx0XHRcdGlzTGFzdERheSAmJiAhaXNFbXB0eURheSA/ICdjYWxlbmRhcl9fZGF5LS1sYXN0JyA6ICcnXHJcblx0XHR9XCIgPjwvZGl2PmBcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRnZXRZZWFyOiBpZCA9PiB7XHJcblx0XHRcdHNldEVtcGxveWVlSWQoaWQpXHJcblx0XHRcdHJldHVybiBnZXRZZWFyQ29udGVudCgpXHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBlbXBsb3llZSA9IG5ldyBFbXBsb3llZSgpLFxyXG5cdGNhbGVuZGFyID0gbmV3IENhbGVuZGFyKClcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG5cdGNvbnN0IGV2ZW50Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXZhY2F0aW9uLXRhYmxlJylcclxuXHJcblx0ZXZlbnRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZXZlbnQgPT4ge1xyXG5cdFx0aWYgKGV2ZW50LnRhcmdldC5kYXRhc2V0LmV2ZW50SWQgJiYgZXZlbnQudGFyZ2V0LmRhdGFzZXQuZXZlbnRJZCAhPT0gZXZlbnQucmVsYXRlZFRhcmdldC5kYXRhc2V0LmV2ZW50SWQpXHJcblx0XHRcdGVtcGxveWVlLmRpc3BsYXlFdmVudEluZm9ybWF0aW9uKGV2ZW50LnRhcmdldC5kYXRhc2V0LmV2ZW50SWQpXHJcblx0XHQvL2V2ZW50LnJlbGF0ZWRUYXJnZXQg0L/RgNC+0LLQtdGA0LrQsCDRh9GC0L7QsdGLINC/0YDQuCDQtNCy0LjQttC10L3QuNC4INC40Lcg0LrQvtC90YHQvtC70Lgg0L3QtSDQstGL0LvQtdGC0LDQu9CwINC+0YjQuNCx0LrQsFxyXG5cdFx0aWYgKGV2ZW50LnJlbGF0ZWRUYXJnZXQgJiYgZXZlbnQucmVsYXRlZFRhcmdldC5kYXRhc2V0LmV2ZW50SWQgJiYgIWV2ZW50LnRhcmdldC5kYXRhc2V0LmV2ZW50SWQpIHtcclxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXZhY2F0aW9uLXRhYmxlIC5jYWxlbmRhci1ldmVudCcpLnJlbW92ZSgpXHJcblx0XHR9XHJcblx0fSlcclxufSlcclxuZW1wbG95ZWUubG9hZEVtcGxveWVlKClcclxuIl19
