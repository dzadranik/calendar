"use strict";var _Employee=Employee(),loadEmployee=_Employee.loadEmployee,displayEventInformation=_Employee.displayEventInformation,_Calendar=Calendar(),getYear=_Calendar.getYear;function Employee(){var t=[],n=function(t,n){document.querySelector(n).innerHTML+=t},e=function(){return t.map((function(t){return"<tr> ".concat(a(t)+getYear(t.id)," </tr>")})).join("")},a=function(t){var n=t.name,e=t.img,a=t.vacationDaysCount;return'<td>\n\t\t\t\t\t<img class="vacation__employee-photo" src="'.concat(e,'" alt="Employee image" />\n\t\t\t\t\t<div class="vacation__employee-name">').concat(n,"</div>\n\t\t\t\t</td>\n\t\t\t\t<td>").concat(a,"/28</td>")},c=function(t){var n=t.id;t.events.forEach((function(t){return o(t,n)}))},o=function(t,n){var e=t.id,a=t.name,c=t.dateStart,o=t.dateEnd,r=c.split(".").map(parseFloat),d=o.split(".").map(parseFloat),i=r[0],l=r[1],v=d[0],s=d[1],u=function(t,e){return document.querySelector(".js-day-".concat(t,"-").concat(e-1,"-").concat(n))},m=function(t,c){t.classList.add("calendar__day--".concat(a)),t.setAttribute("data-event-id","".concat(n,"-").concat(e,"-").concat(c))};if(l===s)for(var f=i;f<=v;f++)m(u(f,l),l-1);else{for(var _=i;_<=31;_++){var p=u(_,l);p&&m(p,l-1)}for(var y=1;y<=v;y++)m(u(y,s),s-1)}},r=function(t){return"vacation"===t?"отпуск":"red"===t?"красная метка":"yellow"===t?"желтая метка":""};return{loadEmployee:function(){fetch("https://dzadranik.github.io/i-dex/src/json/vacation-calendar.json").then((function(t){return t.json()})).then((function(a){!function(a){t=a,n(e(),".js-vacation-table")}(a),t.forEach((function(t){return c(t)}))}))},displayEventInformation:function(e){var a=e.split("-").map(parseFloat),c=a[0],o=a[1],d=a[2],i=t.find((function(t){return t.id===c})),l=i.events.find((function(t){return t.id===o}));n(function(t,n){var e=t.name,a=t.img,c=n.name,o=n.dateStart,d=n.dateEnd;return'<div class="calendar-event">\n\t\t\t\t\t<div class="calendar-event__employee">\n\t\t\t\t\t\t<img class="calendar-event__employee-photo" src="'.concat(a,'" alt="Employee image">\n\t\t\t\t\t\t<div class="calendar-event__employee-name">').concat(e,'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="calendar-event__information">\n\t\t\t\t\t\t<div class="calendar-event__date calendar-event__date--').concat(c,'">\n\t\t\t\t\t\t\t').concat(o,".2020 — ").concat(d,'.2020 (14д.)\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="calendar-event__name">').concat(r(c),"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}(i,l),".js-month-".concat(i.id,"-").concat(d))}}}function Calendar(){var t,n,e,a,c,o,r,d=function(d){return c=1,function(a){var c=new Date;o=c.getDate(),r=c.getMonth(),e=a,t=new Date(2020,a+1,0).getDate();var d=new Date(2020,a,1).getDay();n=0===d?6:d-1}(d),'<td>\n\t\t\t\t\t<div class="calendar__month js-month-'.concat(a,"-").concat(d,'"> \n\t\t\t\t\t\t').concat(i(),"\n\t\t\t\t\t</div>\n\t\t\t\t</td>")},i=function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c<=t?n(e+1,a+=l()):a},l=function(){return'<div class="calendar__week">\n\t\t\t\t\t'.concat(v(),"\n\t\t\t\t</div>")},v=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a<7?(n>0&&c<7||c>t?(o+=s("calendar__empty"),n--):o+=s("calendar__day"),e(a+1,o)):o},s=function(t){var n="calendar__empty"===t,d=!(r<e)&&(r!==e||c<o);return!n&&c++,'<div class="'.concat(t," ").concat(n?"":"js-day-".concat(c-1,"-").concat(e,"-").concat(a)," ").concat(d&&!n?"calendar__day--last":"",'" ></div>')};return{getYear:function(t){return function(t){a=t}(t),function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n<12?t(n+1,e+=d(n)):e}()}}}window.addEventListener("load",(function(){var t=document.querySelector(".js-vacation-table");t.addEventListener("mouseover",(function(t){t.target.dataset.eventId&&t.target.dataset.eventId!==t.relatedTarget.dataset.eventId&&displayEventInformation(t.target.dataset.eventId)})),t.addEventListener("mouseover",(function(t){t.relatedTarget&&t.relatedTarget.dataset.eventId&&!t.target.dataset.eventId&&document.querySelector(".js-vacation-table .calendar-event").remove()}))})),loadEmployee();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhZ2VzL2pzL3NjcmlwdC5qcyJdLCJuYW1lcyI6WyJfRW1wbG95ZWUiLCJFbXBsb3llZSIsImxvYWRFbXBsb3llZSIsImRpc3BsYXlFdmVudEluZm9ybWF0aW9uIiwiX0NhbGVuZGFyIiwiQ2FsZW5kYXIiLCJnZXRZZWFyIiwiZW1wbG95ZWVzQXJyYXkiLCJhZGRUb0NvbnRhaW5lciIsImNvbnRlbnQiLCJjb250YWluZXJTZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsImdldEVtcGxveWVlc0NvbnRlbnQiLCJtYXAiLCJpdGVtIiwiY29uY2F0IiwiZ2V0Q29udGVudE9uZUVtcGxveWVlIiwiaWQiLCJqb2luIiwiZW1wbG95ZWUiLCJuYW1lIiwiaW1nIiwidmFjYXRpb25EYXlzQ291bnQiLCJhZGRFdmVudHNUb0NhbGVuZGFyIiwiZXZlbnRzIiwiZm9yRWFjaCIsImV2ZW50IiwiYWRkT25lRXZlbnQiLCJlbXBsb3llZUlkIiwiZGF0ZVN0YXJ0IiwiZGF0ZUVuZCIsImRhdGVTdGFydEV2ZW50Iiwic3BsaXQiLCJwYXJzZUZsb2F0IiwiZGF0ZUVuZEV2ZW50Iiwic3RhcnREYXkiLCJzdGFydE1vbnRoIiwiZW5kRGF5IiwiZW5kTW9udGgiLCJmaW5kRGF5Q29udGFpbmVyIiwiZGF5IiwibW9udGgiLCJhZGRFdmVudENsYXNzQW5kQXR0cmlidXRlIiwiZGF5Q29udGFpbmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiaSIsImdldEV2ZW50TmFtZSIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImVtcGxveWVlcyIsImRpc3BsYXlFbXBsb3llZXMiLCJldmVudElkIiwiZXZlbnRJZEFycmF5IiwiZXZlbnREYXkiLCJldmVudE1vbnRoIiwiZXZlbnRFbXBsb3llZUlkIiwiZW1wbG95ZWVJbmZvcm1hdGlvbiIsImZpbmQiLCJldmVudEluZm9ybWF0aW9uIiwiZXZlbnROYW1lIiwiZ2V0Q2FsZW5kYXJFdmVudENvbnRlbnQiLCJkYXlzSW5Nb250aCIsImZpcnN0RGF5IiwidG9kYXkiLCJ0b2RheU1vbnRoIiwiZ2V0T25lTW9udGgiLCJtIiwibW9udGhJbmRleCIsInRvZGF5RGF0ZSIsIkRhdGUiLCJnZXREYXRlIiwiZ2V0TW9udGgiLCJmckQiLCJnZXREYXkiLCJzZXRNb250aEluZm9ybWF0aW9uIiwiZ2V0V2Vla3MiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJnZXRPbmVXZWVrIiwiZ2V0RGF5cyIsImRheXNDb250ZW50IiwiZ2V0T25lRGF5IiwiZGF5Q2xhc3MiLCJpc0VtcHR5RGF5IiwiaXNMYXN0RGF5Iiwic2V0RW1wbG95ZWVJZCIsImdldFllYXJDb250ZW50Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Q29udGFpbmVyIiwidGFyZ2V0IiwiZGF0YXNldCIsInJlbGF0ZWRUYXJnZXQiLCJyZW1vdmUiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsSUFBSUEsVUFGOENDLFdBQTFDQyxhQUdXRixVQUhYRSxhQUFjQyx3QkFJUUgsVUFKUkcsd0JBS2xCQyxVQUpXQyxXQUFaQyxRQUtXRixVQUxYRSxRQWtCSCxTQUFTTCxXQUNSLElBQUlNLEVBQWlCLEdBRWZDLEVBQWlCLFNBQUNDLEVBQVNDLEdBQ2RDLFNBQVNDLGNBQWNGLEdBQy9CRyxXQUFhSixHQVFsQkssRUFBc0IsV0FBQSxPQUMzQlAsRUFBZVEsS0FBSSxTQUFBQyxHQUFJLE1BQUEsUUFBQUMsT0FBWUMsRUFBc0JGLEdBQVFWLFFBQVFVLEVBQUtHLElBQXZELGFBQW9FQyxLQUFLLEtBRTNGRixFQUF3QixTQUFBRyxHQUFZLElBQ25DQyxFQUFpQ0QsRUFBakNDLEtBQU1DLEVBQTJCRixFQUEzQkUsSUFBS0MsRUFBc0JILEVBQXRCRyxrQkFDakIsTUFBQSw4REFBQVAsT0FDZ0RNLEVBRGhELDhFQUFBTixPQUUwQ0ssRUFGMUMsdUNBQUFMLE9BSVFPLEVBSlIsYUFXS0MsRUFBc0IsU0FBQUosR0FBWSxJ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dGVudCI6WyJjb25zdCB7IGxvYWRFbXBsb3llZSwgZGlzcGxheUV2ZW50SW5mb3JtYXRpb24gfSA9IEVtcGxveWVlKCksXHJcblx0eyBnZXRZZWFyIH0gPSBDYWxlbmRhcigpXHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuXHRjb25zdCBldmVudENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy12YWNhdGlvbi10YWJsZScpXHJcblxyXG5cdGV2ZW50Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGV2ZW50ID0+IHtcclxuXHRcdGlmIChldmVudC50YXJnZXQuZGF0YXNldC5ldmVudElkICYmIGV2ZW50LnRhcmdldC5kYXRhc2V0LmV2ZW50SWQgIT09IGV2ZW50LnJlbGF0ZWRUYXJnZXQuZGF0YXNldC5ldmVudElkKVxyXG5cdFx0XHRkaXNwbGF5RXZlbnRJbmZvcm1hdGlvbihldmVudC50YXJnZXQuZGF0YXNldC5ldmVudElkKVxyXG5cdH0pXHJcblx0ZXZlbnRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZXZlbnQgPT4ge1xyXG5cdFx0Ly9ldmVudC5yZWxhdGVkVGFyZ2V0INC/0YDQvtCy0LXRgNC60LAg0YfRgtC+0LHRiyDQv9GA0Lgg0LTQstC40LbQtdC90LjQuCDQuNC3INC60L7QvdGB0L7Qu9C4INC90LUg0LLRi9C70LXRgtCw0LvQsCDQvtGI0LjQsdC60LBcclxuXHRcdGlmIChldmVudC5yZWxhdGVkVGFyZ2V0ICYmIGV2ZW50LnJlbGF0ZWRUYXJnZXQuZGF0YXNldC5ldmVudElkICYmICFldmVudC50YXJnZXQuZGF0YXNldC5ldmVudElkKSB7XHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy12YWNhdGlvbi10YWJsZSAuY2FsZW5kYXItZXZlbnQnKS5yZW1vdmUoKVxyXG5cdFx0fVxyXG5cdH0pXHJcbn0pXHJcbmxvYWRFbXBsb3llZSgpXHJcblxyXG5mdW5jdGlvbiBFbXBsb3llZSgpIHtcclxuXHRsZXQgZW1wbG95ZWVzQXJyYXkgPSBbXVxyXG5cclxuXHRjb25zdCBhZGRUb0NvbnRhaW5lciA9IChjb250ZW50LCBjb250YWluZXJTZWxlY3RvcikgPT4ge1xyXG5cdFx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3RvcilcclxuXHRcdGNvbnRhaW5lci5pbm5lckhUTUwgKz0gY29udGVudFxyXG5cdH1cclxuXHJcblx0Y29uc3QgZGlzcGxheUVtcGxveWVlcyA9IGVtcGxveWVlcyA9PiB7XHJcblx0XHRlbXBsb3llZXNBcnJheSA9IGVtcGxveWVlc1xyXG5cdFx0YWRkVG9Db250YWluZXIoZ2V0RW1wbG95ZWVzQ29udGVudCgpLCAnLmpzLXZhY2F0aW9uLXRhYmxlJylcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldEVtcGxveWVlc0NvbnRlbnQgPSAoKSA9PlxyXG5cdFx0ZW1wbG95ZWVzQXJyYXkubWFwKGl0ZW0gPT4gYDx0cj4gJHtnZXRDb250ZW50T25lRW1wbG95ZWUoaXRlbSkgKyBnZXRZZWFyKGl0ZW0uaWQpfSA8L3RyPmApLmpvaW4oJycpXHJcblxyXG5cdGNvbnN0IGdldENvbnRlbnRPbmVFbXBsb3llZSA9IGVtcGxveWVlID0+IHtcclxuXHRcdGxldCB7IG5hbWUsIGltZywgdmFjYXRpb25EYXlzQ291bnQgfSA9IGVtcGxveWVlXHJcblx0XHRyZXR1cm4gYDx0ZD5cclxuXHRcdFx0XHRcdDxpbWcgY2xhc3M9XCJ2YWNhdGlvbl9fZW1wbG95ZWUtcGhvdG9cIiBzcmM9XCIke2ltZ31cIiBhbHQ9XCJFbXBsb3llZSBpbWFnZVwiIC8+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidmFjYXRpb25fX2VtcGxveWVlLW5hbWVcIj4ke25hbWV9PC9kaXY+XHJcblx0XHRcdFx0PC90ZD5cclxuXHRcdFx0XHQ8dGQ+JHt2YWNhdGlvbkRheXNDb3VudH0vMjg8L3RkPmBcclxuXHR9XHJcblxyXG5cdGNvbnN0IGRpc3BsYXlFbXBsb3llZXNFdmVudHMgPSAoKSA9PiB7XHJcblx0XHRlbXBsb3llZXNBcnJheS5mb3JFYWNoKGVtcGxveWVlID0+IGFkZEV2ZW50c1RvQ2FsZW5kYXIoZW1wbG95ZWUpKVxyXG5cdH1cclxuXHJcblx0Y29uc3QgYWRkRXZlbnRzVG9DYWxlbmRhciA9IGVtcGxveWVlID0+IHtcclxuXHRcdGNvbnN0IHsgaWQsIGV2ZW50cyB9ID0gZW1wbG95ZWVcclxuXHRcdGV2ZW50cy5mb3JFYWNoKGV2ZW50ID0+IGFkZE9uZUV2ZW50KGV2ZW50LCBpZCkpXHJcblx0fVxyXG5cclxuXHRjb25zdCBhZGRPbmVFdmVudCA9IChldmVudCwgZW1wbG95ZWVJZCkgPT4ge1xyXG5cdFx0bGV0IHsgaWQsIG5hbWUsIGRhdGVTdGFydCwgZGF0ZUVuZCB9ID0gZXZlbnQsXHJcblx0XHRcdGRhdGVTdGFydEV2ZW50ID0gZGF0ZVN0YXJ0LnNwbGl0KCcuJykubWFwKHBhcnNlRmxvYXQpLFxyXG5cdFx0XHRkYXRlRW5kRXZlbnQgPSBkYXRlRW5kLnNwbGl0KCcuJykubWFwKHBhcnNlRmxvYXQpLFxyXG5cdFx0XHRzdGFydERheSA9IGRhdGVTdGFydEV2ZW50WzBdLFxyXG5cdFx0XHRzdGFydE1vbnRoID0gZGF0ZVN0YXJ0RXZlbnRbMV0sXHJcblx0XHRcdGVuZERheSA9IGRhdGVFbmRFdmVudFswXSxcclxuXHRcdFx0ZW5kTW9udGggPSBkYXRlRW5kRXZlbnRbMV1cclxuXHJcblx0XHRjb25zdCBmaW5kRGF5Q29udGFpbmVyID0gKGRheSwgbW9udGgpID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5qcy1kYXktJHtkYXl9LSR7bW9udGggLSAxfS0ke2VtcGxveWVlSWR9YClcclxuXHJcblx0XHRjb25zdCBhZGRFdmVudENsYXNzQW5kQXR0cmlidXRlID0gKGRheUNvbnRhaW5lciwgbW9udGgpID0+IHtcclxuXHRcdFx0ZGF5Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoYGNhbGVuZGFyX19kYXktLSR7bmFtZX1gKVxyXG5cdFx0XHRkYXlDb250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLWV2ZW50LWlkJywgYCR7ZW1wbG95ZWVJZH0tJHtpZH0tJHttb250aH1gKVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChzdGFydE1vbnRoID09PSBlbmRNb250aCkge1xyXG5cdFx0XHRmb3IgKGxldCBpID0gc3RhcnREYXk7IGkgPD0gZW5kRGF5OyBpKyspIHtcclxuXHRcdFx0XHRhZGRFdmVudENsYXNzQW5kQXR0cmlidXRlKGZpbmREYXlDb250YWluZXIoaSwgc3RhcnRNb250aCksIHN0YXJ0TW9udGggLSAxKVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRmb3IgKGxldCBpID0gc3RhcnREYXk7IGkgPD0gMzE7IGkrKykge1xyXG5cdFx0XHRcdGNvbnN0IGRheUNvbnRhaW5lciA9IGZpbmREYXlDb250YWluZXIoaSwgc3RhcnRNb250aClcclxuXHJcblx0XHRcdFx0aWYgKGRheUNvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0YWRkRXZlbnRDbGFzc0FuZEF0dHJpYnV0ZShkYXlDb250YWluZXIsIHN0YXJ0TW9udGggLSAxKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRmb3IgKGxldCBpID0gMTsgaSA8PSBlbmREYXk7IGkrKykge1xyXG5cdFx0XHRcdGFkZEV2ZW50Q2xhc3NBbmRBdHRyaWJ1dGUoZmluZERheUNvbnRhaW5lcihpLCBlbmRNb250aCksIGVuZE1vbnRoIC0gMSlcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y29uc3QgZ2V0Q2FsZW5kYXJFdmVudENvbnRlbnQgPSAoZW1wbG95ZWVJbmZvcm1hdGlvbiwgZXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG5cdFx0Y29uc3QgeyBuYW1lLCBpbWcgfSA9IGVtcGxveWVlSW5mb3JtYXRpb24sXHJcblx0XHRcdHsgbmFtZTogZXZlbnROYW1lLCBkYXRlU3RhcnQsIGRhdGVFbmQgfSA9IGV2ZW50SW5mb3JtYXRpb25cclxuXHRcdHJldHVybiBgPGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50XCI+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX2VtcGxveWVlXCI+XHJcblx0XHRcdFx0XHRcdDxpbWcgY2xhc3M9XCJjYWxlbmRhci1ldmVudF9fZW1wbG95ZWUtcGhvdG9cIiBzcmM9XCIke2ltZ31cIiBhbHQ9XCJFbXBsb3llZSBpbWFnZVwiPlxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX2VtcGxveWVlLW5hbWVcIj4ke25hbWV9PC9kaXY+XHJcblx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjYWxlbmRhci1ldmVudF9faW5mb3JtYXRpb25cIj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50X19kYXRlIGNhbGVuZGFyLWV2ZW50X19kYXRlLS0ke2V2ZW50TmFtZX1cIj5cclxuXHRcdFx0XHRcdFx0XHQke2RhdGVTdGFydH0uMjAyMCDigJTCoCR7ZGF0ZUVuZH0uMjAyMCAoMTTQtC4pXHJcblx0XHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY2FsZW5kYXItZXZlbnRfX25hbWVcIj4ke2dldEV2ZW50TmFtZShldmVudE5hbWUpfTwvZGl2PlxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0PC9kaXY+YFxyXG5cdH1cclxuXHJcblx0Y29uc3QgZ2V0RXZlbnROYW1lID0gbmFtZSA9PiB7XHJcblx0XHRyZXR1cm4gbmFtZSA9PT0gJ3ZhY2F0aW9uJ1xyXG5cdFx0XHQ/ICfQvtGC0L/Rg9GB0LonXHJcblx0XHRcdDogbmFtZSA9PT0gJ3JlZCdcclxuXHRcdFx0PyAn0LrRgNCw0YHQvdCw0Y8g0LzQtdGC0LrQsCdcclxuXHRcdFx0OiBuYW1lID09PSAneWVsbG93J1xyXG5cdFx0XHQ/ICfQttC10LvRgtCw0Y8g0LzQtdGC0LrQsCdcclxuXHRcdFx0OiAnJ1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdGxvYWRFbXBsb3llZTogKCkgPT4ge1xyXG5cdFx0XHRmZXRjaCgnaHR0cHM6Ly9kemFkcmFuaWsuZ2l0aHViLmlvL2ktZGV4L3NyYy9qc29uL3ZhY2F0aW9uLWNhbGVuZGFyLmpzb24nKVxyXG5cdFx0XHRcdC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuXHRcdFx0XHQudGhlbihlbXBsb3llZXMgPT4ge1xyXG5cdFx0XHRcdFx0ZGlzcGxheUVtcGxveWVlcyhlbXBsb3llZXMpXHJcblx0XHRcdFx0XHRkaXNwbGF5RW1wbG95ZWVzRXZlbnRzKClcclxuXHRcdFx0XHR9KVxyXG5cdFx0fSxcclxuXHRcdGRpc3BsYXlFdmVudEluZm9ybWF0aW9uOiBldmVudElkID0+IHtcclxuXHRcdFx0Ly9ldmVudElkW2RheSwgbW9udGgsIGVtcGxveWVlSWRdXHJcblx0XHRcdGxldCBldmVudElkQXJyYXkgPSBldmVudElkLnNwbGl0KCctJykubWFwKHBhcnNlRmxvYXQpLFxyXG5cdFx0XHRcdGV2ZW50RGF5ID0gZXZlbnRJZEFycmF5WzBdLFxyXG5cdFx0XHRcdGV2ZW50TW9udGggPSBldmVudElkQXJyYXlbMV0sXHJcblx0XHRcdFx0ZXZlbnRFbXBsb3llZUlkID0gZXZlbnRJZEFycmF5WzJdLFxyXG5cdFx0XHRcdGVtcGxveWVlSW5mb3JtYXRpb24gPSBlbXBsb3llZXNBcnJheS5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gZXZlbnREYXkpLFxyXG5cdFx0XHRcdGV2ZW50SW5mb3JtYXRpb24gPSBlbXBsb3llZUluZm9ybWF0aW9uLmV2ZW50cy5maW5kKGV2ZW50ID0+IGV2ZW50LmlkID09PSBldmVudE1vbnRoKVxyXG5cclxuXHRcdFx0YWRkVG9Db250YWluZXIoXHJcblx0XHRcdFx0Z2V0Q2FsZW5kYXJFdmVudENvbnRlbnQoZW1wbG95ZWVJbmZvcm1hdGlvbiwgZXZlbnRJbmZvcm1hdGlvbiksXHJcblx0XHRcdFx0YC5qcy1tb250aC0ke2VtcGxveWVlSW5mb3JtYXRpb24uaWR9LSR7ZXZlbnRFbXBsb3llZUlkfWBcclxuXHRcdFx0KVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gQ2FsZW5kYXIoKSB7XHJcblx0bGV0IGRheXNJbk1vbnRoLCBmaXJzdERheSwgbW9udGgsIGVtcGxveWVlSWQsIGRheSwgdG9kYXksIHRvZGF5TW9udGhcclxuXHQvLyBkYXlzSW5Nb250aC3QutC+0LvQuNGH0LXRgdGC0LLQviDQtNC90LXQuSDQsiDQvNC10YHRj9GG0LUsXHJcblx0Ly8gZmlyc3REYXkt0LTQtdC90Ywg0L3QtdC00LXQu9C4INC/0LXRgNCy0L7Qs9C+INC00L3RjyxcclxuXHQvLyBtb250aC3QuNC90LTQtdC60YEg0LzQtdGB0Y/RhtCwLFxyXG5cdC8vIGVtcGxveWVlSWQtIGlkINGB0L7RgtGA0YPQtNC90LjQutCwINC00LvRjyDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8ganMtbW9udGgtKiog0LrQu9Cw0YHRgdCwLFxyXG5cdC8vIGRheS0g0YHRh9C10YLRh9C40Log0LTQvdC10LlcclxuXHJcblx0Y29uc3Qgc2V0RW1wbG95ZWVJZCA9IGlkID0+IHtcclxuXHRcdHJldHVybiAoZW1wbG95ZWVJZCA9IGlkKVxyXG5cdH1cclxuXHJcblx0Y29uc3Qgc2V0TW9udGhJbmZvcm1hdGlvbiA9IG1vbnRoSW5kZXggPT4ge1xyXG5cdFx0bGV0IHRvZGF5RGF0ZSA9IG5ldyBEYXRlKClcclxuXHRcdHRvZGF5ID0gdG9kYXlEYXRlLmdldERhdGUoKVxyXG5cdFx0dG9kYXlNb250aCA9IHRvZGF5RGF0ZS5nZXRNb250aCgpXHJcblx0XHRtb250aCA9IG1vbnRoSW5kZXhcclxuXHRcdGRheXNJbk1vbnRoID0gbmV3IERhdGUoMjAyMCwgbW9udGhJbmRleCArIDEsIDApLmdldERhdGUoKVxyXG5cdFx0bGV0IGZyRCA9IG5ldyBEYXRlKDIwMjAsIG1vbnRoSW5kZXgsIDEpLmdldERheSgpXHJcblx0XHRmckQgPT09IDAgPyAoZmlyc3REYXkgPSA2KSA6IChmaXJzdERheSA9IGZyRCAtIDEpIC8v0YHQtNC10LvQsNGC0Ywg0L7RgtGB0YfQtdGCINC00L3QtdC5INC90LXQtNC10LvQuCDRgSDQv9C+0L3QtdC00LXQu9GM0L3QuNC60LBcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldFllYXJDb250ZW50ID0gKGkgPSAwLCBjb250ZW50ID0gJycpID0+IHtcclxuXHRcdGlmIChpIDwgMTIpIHtcclxuXHRcdFx0Y29udGVudCArPSBnZXRPbmVNb250aChpKVxyXG5cdFx0XHRyZXR1cm4gZ2V0WWVhckNvbnRlbnQoaSArIDEsIGNvbnRlbnQpXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gY29udGVudFxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y29uc3QgZ2V0T25lTW9udGggPSBtID0+IHtcclxuXHRcdGRheSA9IDFcclxuXHRcdHNldE1vbnRoSW5mb3JtYXRpb24obSlcclxuXHRcdC8vanMtbW9udGgte2VtcGxveWVlSWR9LXttb250aH0g0YTQvtGA0LzQuNGA0YPQtdGC0YHRjyDQutC70LDRgdGBINC00LvRjyDQv9C+0LjRgdC60LAg0LTQvdGPID0+INC+0YLQvtCx0YDQsNC30LjRgtGMIGV2ZW50XHJcblx0XHRyZXR1cm4gYDx0ZD5cclxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjYWxlbmRhcl9fbW9udGgganMtbW9udGgtJHtlbXBsb3llZUlkfS0ke219XCI+IFxyXG5cdFx0XHRcdFx0XHQke2dldFdlZWtzKCl9XHJcblx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHQ8L3RkPmBcclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldFdlZWtzID0gKGkgPSAwLCBjb250ZW50ID0gJycpID0+IHtcclxuXHRcdGlmIChkYXkgPD0gZGF5c0luTW9udGgpIHtcclxuXHRcdFx0Y29udGVudCArPSBnZXRPbmVXZWVrKClcclxuXHRcdFx0cmV0dXJuIGdldFdlZWtzKGkgKyAxLCBjb250ZW50KVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIGNvbnRlbnRcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNvbnN0IGdldE9uZVdlZWsgPSAoKSA9PiB7XHJcblx0XHRyZXR1cm4gYDxkaXYgY2xhc3M9XCJjYWxlbmRhcl9fd2Vla1wiPlxyXG5cdFx0XHRcdFx0JHtnZXREYXlzKCl9XHJcblx0XHRcdFx0PC9kaXY+YFxyXG5cdH1cclxuXHJcblx0Y29uc3QgZ2V0RGF5cyA9IChpID0gMCwgZGF5c0NvbnRlbnQgPSAnJykgPT4ge1xyXG5cdFx0aWYgKGkgPCA3KSB7XHJcblx0XHRcdGlmICgoZmlyc3REYXkgPiAwICYmIGRheSA8IDcpIHx8IGRheSA+IGRheXNJbk1vbnRoKSB7XHJcblx0XHRcdFx0ZGF5c0NvbnRlbnQgKz0gZ2V0T25lRGF5KCdjYWxlbmRhcl9fZW1wdHknKVxyXG5cdFx0XHRcdGZpcnN0RGF5LS1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRkYXlzQ29udGVudCArPSBnZXRPbmVEYXkoJ2NhbGVuZGFyX19kYXknKVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBnZXREYXlzKGkgKyAxLCBkYXlzQ29udGVudClcclxuXHRcdH1cclxuXHRcdHJldHVybiBkYXlzQ29udGVudFxyXG5cdH1cclxuXHJcblx0Y29uc3QgZ2V0SXNMYXN0RGF5ID0gKCkgPT4ge1xyXG5cdFx0aWYgKHRvZGF5TW9udGggPCBtb250aCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2VcclxuXHRcdH1cclxuXHRcdGlmICh0b2RheU1vbnRoID09PSBtb250aCkge1xyXG5cdFx0XHRyZXR1cm4gZGF5IDwgdG9kYXlcclxuXHRcdH1cclxuXHRcdHJldHVybiB0cnVlXHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRPbmVEYXkgPSBkYXlDbGFzcyA9PiB7XHJcblx0XHRsZXQgaXNFbXB0eURheSA9IGRheUNsYXNzID09PSAnY2FsZW5kYXJfX2VtcHR5JyxcclxuXHRcdFx0aXNMYXN0RGF5ID0gZ2V0SXNMYXN0RGF5KClcclxuXHRcdCFpc0VtcHR5RGF5ID8gZGF5KysgOiAnJ1xyXG5cdFx0Ly/Rh9GC0L7QsdGLINC90LUg0LLQstC+0LTQuNGC0Ywg0LvQuNGI0L3RjtGOINC/0LXRgNC10LzQtdC90L3Rg9GOINGB0L3QsNGH0LDQu9CwINC/0YDQuNCx0LDQstC40YLRjCDQtNC10L3RjCwg0LAg0LIg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNC4INC60LvQsNGB0YHQsCDQtdCz0L4g0LLRi9GH0LXRgdGC0YxcclxuXHRcdHJldHVybiBgPGRpdiBjbGFzcz1cIiR7ZGF5Q2xhc3N9ICR7IWlzRW1wdHlEYXkgPyBganMtZGF5LSR7ZGF5IC0gMX0tJHttb250aH0tJHtlbXBsb3llZUlkfWAgOiBgYH0gJHtcclxuXHRcdFx0aXNMYXN0RGF5ICYmICFpc0VtcHR5RGF5ID8gJ2NhbGVuZGFyX19kYXktLWxhc3QnIDogJydcclxuXHRcdH1cIiA+PC9kaXY+YFxyXG5cdH1cclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdGdldFllYXI6IGlkID0+IHtcclxuXHRcdFx0c2V0RW1wbG95ZWVJZChpZClcclxuXHRcdFx0cmV0dXJuIGdldFllYXJDb250ZW50KClcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIl19
